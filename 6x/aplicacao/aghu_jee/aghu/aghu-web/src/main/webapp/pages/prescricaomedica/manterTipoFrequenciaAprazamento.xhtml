<?xml version="1.0" encoding="UTF-8"?>

<html xmlns="http://www.w3.org/1999/xhtml" xmlns:fn="http://xmlns.jcp.org/jsp/jstl/functions" xmlns:mec="http://xmlns.jcp.org/jsf/composite/components" xmlns:p="http://primefaces.org/ui" xmlns:pe="http://primefaces.org/ui/extensions" xmlns:aghu="http://xmlns.jcp.org/jsf/component" xmlns:ui="http://xmlns.jcp.org/jsf/facelets" xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:c="http://xmlns.jcp.org/jsp/jstl/core" xmlns:mf="http://www.mec.gov.br/taglib">  
  <ui:composition template="/WEB-INF/templates/form_template.xhtml"> 
    <ui:define name="head"> 
      <title>Manter Tipo FrequÃªncia Aprazamento :: AGHU - MEC</title> 
    </ui:define>  
    <ui:define name="body"> 
      <ui:param name="stopEnter" value="true"/>  
      <h:form prependId="false" id="formPesquisa"> 
        <aghu:panelGeral legend="#{messages.TITLE_TIPO_FREQUENCIA_APRAZAMENTO_TITULO1}"> 
          <aghu:linha> 
            <p:outputPanel id="masterEdit1" layout="inline"> 
              <mec:inputText label="#{messages.LABEL_TIPO_FREQUENCIA_APRAZAMENTO_SIGLA}" size="3" maxlength="3" required="true" ajaxValidation="false" style="text-transform:uppercase" readonly="#{manterTipoFrequenciaAprazamentoController.entity.seq != null}" title="#{messages.TITLE_TIPO_FREQUENCIA_APRAZAMENTO_SIGLA_EDIT}" value="#{manterTipoFrequenciaAprazamentoController.entity.sigla}" id="sigla"/>  
              <p:outputPanel id="sintaxePanel" layout="inline"> 
                <mec:inputText label="#{messages.LABEL_TIPO_FREQUENCIA_APRAZAMENTO_DESCRICAO}" size="30" maxlength="30" required="true" ajaxValidation="false" style="text-transform:uppercase" readonly="#{manterTipoFrequenciaAprazamentoController.entity.seq != null}" title="#{messages.TITLE_TIPO_FREQUENCIA_APRAZAMENTO_DESCRICAO_EDIT}" value="#{manterTipoFrequenciaAprazamentoController.entity.descricao}" id="descricao"/>
							<mec:inputText
								label="#{messages.LABEL_TIPO_FREQUENCIA_APRAZAMENTO_SINTAXE}"
								style="text-transform:uppercase" size="25" maxlength="25"
								ajaxValidation="false"
								readonly="#{manterTipoFrequenciaAprazamentoController.entity.seq != null or not manterTipoFrequenciaAprazamentoController.entity.indDigitaFrequencia}"
								required="#{manterTipoFrequenciaAprazamentoController.entity.indDigitaFrequencia}"
								title="#{messages.TITLE_TIPO_FREQUENCIA_APRAZAMENTO_SINTAXE_EDIT}"
								value="#{manterTipoFrequenciaAprazamentoController.entity.sintaxe}"
								id="sintaxe"
								removerCaratersEspeciais="false" />
						</p:outputPanel>  
              <mec:inputNumero label="#{messages.LABEL_TIPO_FREQUENCIA_APRAZAMENTO_FATOR_HORAS}" size="15" maxlength="15" required="true" ajaxValidation="false" styleClass="mask_dose_medicamento" readonly="#{manterTipoFrequenciaAprazamentoController.entity.seq != null}" title="#{messages.TITLE_TIPO_FREQUENCIA_APRAZAMENTO_FATOR_HORAS_EDIT}" value="#{manterTipoFrequenciaAprazamentoController.entity.fatorConversaoHoras}" converter="#{bigDecimalDoseConverter}" id="tipoFrequenciaFatorHoras"/> 
            </p:outputPanel> 
          </aghu:linha>  
          <aghu:linha> 
            <p:outputPanel id="masterEdit2" layout="inline"> 
              <mec:selectOneMenu enum="DominioFormaCalculoAprazamento" required="true" label="#{messages.LABEL_TIPO_FREQUENCIA_APRAZAMENTO_FORMA}" title="#{messages.TITLE_TIPO_FREQUENCIA_APRAZAMENTO_FORMA}" value="#{manterTipoFrequenciaAprazamentoController.entity.indFormaAprazamento}" id="listaFormas"/>  
              <mec:selectOneMenu enum="DominioSituacao" required="true" label="#{messages.LABEL_TIPO_FREQUENCIA_APRAZAMENTO_SITUACAO}" title="#{messages.TITLE_TIPO_FREQUENCIA_APRAZAMENTO_SITUACAO_EDIT}" noSelectionOption="false" value="#{manterTipoFrequenciaAprazamentoController.entity.indSituacao}" id="situacao"/>  
              <mec:selectBooleanCheckbox label="#{messages.LABEL_TIPO_FREQUENCIA_APRAZAMENTO_FREQUENCIA}" render="sintaxe" title="#{messages.TITLE_TIPO_FREQUENCIA_APRAZAMENTO_FREQUENCIA_EDIT}" readonly="#{manterTipoFrequenciaAprazamentoController.entity.seq != null}" value="#{manterTipoFrequenciaAprazamentoController.entity.indDigitaFrequencia}" id="frequencia"> 
                <p:ajax event="change" update="@(#sintaxePanel)"  process="@this" listener="#{manterTipoFrequenciaAprazamentoController.verificaDigitaFrequencia}"/> 
              </mec:selectBooleanCheckbox>  
              <mec:selectBooleanCheckbox label="#{messages.LABEL_TIPO_FREQUENCIA_APRAZAMENTO_QUIMIOTERAPIA}" title="#{messages.TITLE_TIPO_FREQUENCIA_APRAZAMENTO_QUIMIOTERAPIA_EDIT}" value="#{manterTipoFrequenciaAprazamentoController.entity.indUsoQuimioterapia}" id="quimioterapia"/>  
              <mec:selectBooleanCheckbox label="#{messages.LABEL_TIPO_FREQUENCIA_APRAZAMENTO_HEMOTERAPIA}" title="#{messages.TITLE_TIPO_FREQUENCIA_APRAZAMENTO_HEMOTERAPIA_EDIT}" readonly="#{manterTipoFrequenciaAprazamentoController.entity.seq != null}" value="#{manterTipoFrequenciaAprazamentoController.entity.indUsoHemoterapia}" id="hemoterapia"/> 
            </p:outputPanel> 
          </aghu:linha> 
        </aghu:panelGeral>  
        <aghu:panelGeral legend="#{messages.TITLE_TIPO_FREQUENCIA_APRAZAMENTO_TITULO3}"> 
          <p:outputPanel id="editDetail" layout="inline"> 
            <aghu:linha> 
              <mec:inputText style="text-transform:uppercase" label="#{messages.LABEL_TIPO_FREQUENCIA_APRAZAMENTO_DESCRICAO}" size="20" maxlength="20" required="true" title="#{messages.TITLE_TIPO_FREQUENCIA_APRAZAMENTO_DESCRICAO_EDIT}" ajaxValidation="false" value="#{manterTipoFrequenciaAprazamentoController.detail.descricao}" readonly="#{manterTipoFrequenciaAprazamentoController.detail.id != null and manterTipoFrequenciaAprazamentoController.editaTipoFrequenciaAprazamento()}" id="descricaoAprazamento"/>  
              <mec:inputText label="#{messages.LABEL_TIPO_FREQUENCIA_APRAZAMENTO_HORARIO}" size="5" maxlength="5" ajaxValidation="false" title="#{messages.TITLE_TIPO_FREQUENCIA_APRAZAMENTO_HORARIO_EDIT}" incluirMascaraHora="true" required="false" readonly="#{manterTipoFrequenciaAprazamentoController.detail.id != null and manterTipoFrequenciaAprazamentoController.editaTipoFrequenciaAprazamento()}" value="#{manterTipoFrequenciaAprazamentoController.detail.horario}" datePattern="HH:mm" id="horario"> 
                <f:convertDateTime pattern="HH:mm" for="horario"/> 
              </mec:inputText>  
              <mec:selectOneMenu enum="DominioSituacao" label="#{messages.LABEL_TIPO_FREQUENCIA_APRAZAMENTO_SITUACAO}" title="#{messages.TITLE_TIPO_FREQUENCIA_APRAZAMENTO_SITUACAO_EDIT}" noSelectionOption="false" required="true" value="#{manterTipoFrequenciaAprazamentoController.detail.situacao}" id="situacaoAprazamento"/>  
              <aghu:acao newLine="false"> 
                <mec:commandButton id="idBtnAdicionar" value="#{messages.LABEL_ADICIONAR}" action="#{manterTipoFrequenciaAprazamentoController.adicionarFrequencia}" process="@this,descricaoAprazamento,horario,situacaoAprazamento" ignoreDupResponses="true" profile="add" ajax="true" render="editDetail,aprazamentoResultList, panelAcao"/> 
              </aghu:acao> 
            </aghu:linha> 
          </p:outputPanel>  
          <p:outputPanel id="aprazamentoResultList" layout="inline"> 
            <aghu:linha> 
              <mec:serverDataTable 
              controller="#{manterTipoFrequenciaAprazamentoController}"
              list="#{manterTipoFrequenciaAprazamentoController.aprazamentoFrequenciaList}" scrollable="true"> 
                <c:set var="bean" value="#{item}"/>                 
                    <p:column styleClass="first-column auto-adjust" style="#{(bean.id eq manterTipoFrequenciaAprazamentoController.detail.id)?'background-color:#EEE8AA':''}"> 
                      <f:facet name="header">
                      	<h:outputText value="#{messages.LABEL_ACAO}"/>
                      </f:facet> 
                      <mec:commandLink id="bt_ativar_desativar" action="#{manterTipoFrequenciaAprazamentoController.ativarInativar}" style="vertical-align:middle;" title="#{bean.situacao eq 'A' ? messages.LABEL_DESATIVAR : messages.LABEL_ATIVAR}" styleClass=" #{bean.situacao eq 'A' ? 'silk-activate' : 'silk-desactive'} silk-icon" ajax="true" render="aprazamentoResultList, panelAcao" process="@this"> 
                      	<f:setPropertyActionListener target="#{manterTipoFrequenciaAprazamentoController.detail}" value="#{bean}" for="command"/> 
                  	  </mec:commandLink>  
                  	  <mec:commandLink style="vertical-align:middle;" title="#{messages.LABEL_EXCLUIR}" action="#{manterTipoFrequenciaAprazamentoController.excluirFrequenciaAprazamento}" profile="delete" ajax="true" render="aprazamentoResultList, panelAcao" process="@this"> 
                    	<f:setPropertyActionListener target="#{manterTipoFrequenciaAprazamentoController.detail}" value="#{bean}" for="command"/> 
                      </mec:commandLink>  
                    </p:column>  
                    <p:column style="#{(bean.id eq manterTipoFrequenciaAprazamentoController.detail.id)?'background-color:#EEE8AA':''}"> 
                    	<f:facet name="header">		
                        	<h:outputText value="#{messages.LABEL_TIPO_FREQUENCIA_APRAZAMENTO_DESCRICAO}"/> 
                        </f:facet>
                        <h:outputText value="#{bean.descricao}" style="text-transform:uppercase"/> 	
                    </p:column>  
                    <p:column style="#{(bean.id eq manterTipoFrequenciaAprazamentoController.detail.id)?'background-color:#EEE8AA':''}"> 
                      <f:facet name="header">
                      	<h:outputText value="#{messages.LABEL_TIPO_FREQUENCIA_APRAZAMENTO_HORARIO_REF}"/>
                      </f:facet>
                      <h:outputText value="#{bean.horarioFormatado}"/> 	 
                    </p:column>  
                    <p:column style="#{(bean.id eq manterTipoFrequenciaAprazamentoController.detail.id)?'background-color:#EEE8AA':''}"> 
                      <f:facet name="header">
                      	<h:outputText value="#{messages.LABEL_TIPO_FREQUENCIA_APRAZAMENTO_CADASTRADOS}"/>
                      </f:facet>
                      <h:outputText value="#{bean.criadoEmFormatado}"/>	 
                    </p:column>  
                    <p:column style="#{(bean.id eq manterTipoFrequenciaAprazamentoController.detail.id)?'background-color:#EEE8AA':''}"> 
                      <f:facet name="header">
                      	<h:outputText value="#{messages.LABEL_TIPO_FREQUENCIA_APRAZAMENTO_RESPONSAVEL}"/>
                      </f:facet>
                      <h:outputText value="#{bean.servidor.pessoaFisica.nome}"/> 	 
                    </p:column>  
                    <p:column style="#{(bean.id eq manterTipoFrequenciaAprazamentoController.detail.id)?'background-color:#EEE8AA':''}"> 
                    	<f:facet name="header"> 
                        	<h:outputText value="#{messages.LABEL_TIPO_FREQUENCIA_APRAZAMENTO_SITUACAO}"/>
                        </f:facet>
                        <h:outputText value="#{bean.situacao.descricao}"/> 	 
                    </p:column> 
              </mec:serverDataTable> 
            </aghu:linha>  
            <p:outputPanel styleClass="div-alerta" rendered="#{empty manterTipoFrequenciaAprazamentoController.aprazamentoFrequenciaList}" layout="inline"> 
              <h:outputText value="#{messages.MSG_TIPO_FREQUENCIA_APRAZAMENTO_MSG1}"/> 
            </p:outputPanel> 
          </p:outputPanel> 
        </aghu:panelGeral>  
        <aghu:acao> 
         <mec:commandButton id="bt_salvar" value="#{messages.LABEL_GRAVAR}" action="#{manterTipoFrequenciaAprazamentoController.salvar}" profile="ok" ajax="true" render="masterEdit1,masterEdit2, aprazamentoResultList" process="@this, masterEdit1,masterEdit2, aprazamentoResultList" />  
          <p:outputPanel id="panelAcao" ajaxRendered="true" layout="inline"> 
            <mec:commandButton value="#{messages.LABEL_VOLTAR}" rendered="#{manterTipoFrequenciaAprazamentoController.formularioEditado}" immediate="true" oncomplete="PF('modalConfirmacaoPendenciaWG').show();" styleClass="bt_voltar bt_cinza" ajax="true" process="@this" render="modalConfirmacaoPendencia" profile="back"/>  
            <mec:commandButton id="bt_voltar" value="#{messages.LABEL_VOLTAR}" immediate="true" rendered="#{not manterTipoFrequenciaAprazamentoController.formularioEditado}" action="#{manterTipoFrequenciaAprazamentoController.cancelarEdicao}" styleClass="bt_cinza" profile="back"/> 
          </p:outputPanel> 
        </aghu:acao>  
        <p:dialog id="modalConfirmacaoExclusao" width="400" height="150" modal="true" resizable="false" widgetVar="modalConfirmacaoExclusaoWG"> 
          <f:facet name="header"> 
            <h:outputText value="#{messages.TITLE_TIPO_FREQUENCIA_APRAZAMENTO_EXCLUSAO2}"/> 
          </f:facet>  
          <br clear="none"/>  
          <h:outputText value="#{messages.CASCA_MENSAGEM_CONFIRMACAO_EXCLUSAO}"/>  
          <br clear="none"/>  
          <br clear="none"/>  
          <br clear="none"/>  
          <aghu:acao> 
            <p:outputPanel id="formModalExclusao" layout="inline"> 
              <mec:commandButton id="bt_excluir" value="#{messages.CASCA_LABEL_SIM}" action="#{manterTipoFrequenciaAprazamentoController.excluirFrequenciaAprazamento}" reRenderAfterComplete="aprazamentoResultList" oncomplete="PF('modalConfirmacaoExclusaoWG').hide();" profile="ok" ajax="true" render="aprazamentoResultList, panelAcao" process="@this"/>  
              <mec:commandButton value="#{messages.CASCA_LABEL_NAO}" onclick="PF('modalConfirmacaoExclusaoWG').hide();" profile="cancel" ajax="true" process="@this"/> 
            </p:outputPanel> 
          </aghu:acao> 
        </p:dialog>  
        <p:dialog id="modalConfirmacaoPendencia" width="400" height="150" modal="true" resizable="false" widgetVar="modalConfirmacaoPendenciaWG"> 
          <f:facet name="header"> 
            <h:outputText value="#{messages.TITLE_PENDENCIAS_ALTERACAO}"/> 
          </f:facet>  
          <br clear="none"/>  
          <h:outputText value="#{messages.MENSAGEM_PENDENCIAS_ALTERACAO}"/>  
          <br clear="none"/>  
          <br clear="none"/>  
          <br clear="none"/>  
          <aghu:acao> 
            <p:outputPanel id="formConfirmacaoPendencia" layout="inline"> 
              <mec:commandButton id="bt_sim" value="#{messages.CASCA_LABEL_SIM}" action="#{manterTipoFrequenciaAprazamentoController.cancelarEdicao}" immediate="true" reRenderAfterComplete="aprazamentoResultList" oncomplete="PF('modalConfirmacaoPendenciaWG').hide();" profile="ok"/>  
              <mec:commandButton id="bt_nao" value="#{messages.CASCA_LABEL_NAO}" onclick="PF('modalConfirmacaoPendenciaWG').hide();" profile="cancel" ajax="true" process="@this"/> 
            </p:outputPanel> 
          </aghu:acao> 
        </p:dialog>
      </h:form> 
    </ui:define> 
  </ui:composition> 
</html>
