<?xml version="1.0" encoding="UTF-8"?>

<html xmlns="http://www.w3.org/1999/xhtml" xmlns:fn="http://xmlns.jcp.org/jsp/jstl/functions" xmlns:mec="http://xmlns.jcp.org/jsf/composite/components" xmlns:p="http://primefaces.org/ui" xmlns:pe="http://primefaces.org/ui/extensions" xmlns:aghu="http://xmlns.jcp.org/jsf/component" xmlns:ui="http://xmlns.jcp.org/jsf/facelets" xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:c="http://xmlns.jcp.org/jsp/jstl/core" xmlns:mf="http://www.mec.gov.br/taglib">
  <ui:composition>
	<h:form prependId="false" id="formPosAlta">
	  <aghu:panelGeral legend="#{messages.LABEL_POS_ALTA} - #{manterSumarioAltaController.prontuarioFormatado} - #{manterSumarioAltaController.altaSumario.nome}">
        <p:accordionPanel id="togglePanelMotivoAlta" style="margin: 5px 0px !important;" prependId="false">
          <p:tab id="tabPosAlta_0" title="Motivo da Alta (Preenchimento obrigatório)"
               rendered="#{manterSumarioAltaController.validaAltanListaOrigemAlta()}">
            <p:outputPanel id="panelDadosAltaMotivoOpcionais" layout="inline">
                <aghu:linha>
                    <mec:inputText id="motivoAltaDescricao"
                                   value="#{manterSumarioAltaPosAltaController.sumarioAltaPosAltaMotivoVO.motivoAltaMedica.descricao}"
                                   size="240"
                                   maxlength="240"
                                   style="width: 600px"
                                   readonly="true"
                                   bypassUpdates="false"
                                   rendered="#{manterSumarioAltaPosAltaController.sumarioAltaPosAltaMotivoVO.exigeComplemento and manterSumarioAltaPosAltaController.sumarioAltaPosAltaMotivoVO.idItem != null}" />
                    <mec:selectOneMenu id="comboMotivoAlta"
                                       items="#{manterSumarioAltaPosAltaController.listaComboMotivoAlta}"
                                       itemLabel="descricao"
                                       value="#{manterSumarioAltaPosAltaController.indiceSelecionadoAltaMotivos}"
                                       ajax="true"
                                       process="@this">
                        <p:ajax event="change" listener="#{manterSumarioAltaPosAltaController.changeComboMotivoAlta}" 
                       		 update="@(#panelListaAltaMotivo) @(#panelDadosAltaMotivoOpcionais) @(#comboMotivoAlta)" />
                        <f:setPropertyActionListener target="#{manterSumarioAltaPosAltaController.currentSlider}" value="#{0}" for="command"/>
                    </mec:selectOneMenu>
                    <aghu:acao newLine="false">
                        <mec:commandButton id="btGravarMotivoAlta"
                                           rendered="#{manterSumarioAltaPosAltaController.sumarioAltaPosAltaMotivoVO.exigeComplemento and manterSumarioAltaPosAltaController.sumarioAltaPosAltaMotivoVO.idItem == null}"
                                           action="#{manterSumarioAltaPosAltaController.gravarMotivoAlta}"
                                           value="#{messages.LABEL_GRAVAR}" profile="ok" ajax="true"
                                           render="panelDadosAltaMotivo" />
                        <mec:commandButton id="btAtualizarMotivoAlta"
                                           rendered="#{manterSumarioAltaPosAltaController.sumarioAltaPosAltaMotivoVO.exigeComplemento and manterSumarioAltaPosAltaController.sumarioAltaPosAltaMotivoVO.idItem != null}"
                                           action="#{manterSumarioAltaPosAltaController.alterarMotivoAlta}"
                                           value="#{messages.LABEL_ALTERAR}" profile="ok" ajax="true"
                                           render="panelDadosAltaMotivo" />
                        <mec:commandButton id="btCancelarMotivoAlta"
                                           rendered="#{manterSumarioAltaPosAltaController.sumarioAltaPosAltaMotivoVO.exigeComplemento and manterSumarioAltaPosAltaController.sumarioAltaPosAltaMotivoVO.idItem != null}"
                                           action="#{manterSumarioAltaPosAltaController.cancelarMotivoAlta}"
                                           value="#{messages.LABEL_CANCELAR}"
                                           styleClass="bt_cancel_edit bt_cinza" ajax="true"
                                           render="panelDadosAltaMotivo" />
                    </aghu:acao>
                </aghu:linha>
            </p:outputPanel>
            <p:outputPanel id="panelListaAltaMotivo" layout="inline">
                <p:outputPanel rendered="#{not empty manterSumarioAltaPosAltaController.listaAltaMotivo}">
                    <mec:serverDataTable rendered="#{not empty manterSumarioAltaPosAltaController.listaAltaMotivo}"
                                         style="border-top: 0 none !important"
                                         list="#{manterSumarioAltaPosAltaController.listaAltaMotivo}"
                                         scrollHeight="100"
                                         scrollable="true"
                                         controller="manterSumarioAltaPosAltaController">
                        <c:set var="_altaMotivo" value="#{item}" />
                        <p:column style="width:60px; #{(_altaMotivo.idItem == manterSumarioAltaPosAltaController.sumarioAltaPosAltaMotivoVO.idItem) ? 'background-color:#EEE8AA' : ''}">
                            <f:facet name="header">
                                <h:outputText value="#{messages.LABEL_ACOES}" />
                            </f:facet>
                            <mec:commandLink rendered="#{(_altaMotivo.exigeComplemento)}"
                                             title="#{messages.LABEL_EDITAR}"
                                             action="#{manterSumarioAltaPosAltaController.editarMotivoAlta}"
                                             process="@(#panelListaAltaMotivo) @(#panelDadosAltaMotivoOpcionais)"
                                             ajax="true"
                                             render="panelListaAltaMotivo, panelDadosAltaMotivoOpcionais">
                                <f:setPropertyActionListener target="#{manterSumarioAltaPosAltaController.currentSlider}" value="#{0}" for="command"/>
                                <f:setPropertyActionListener target="#{manterSumarioAltaPosAltaController.itemMotivoAltaSelecionado}" value="#{_altaMotivo}" for="command"/>
                                <p:graphicImage value="/resources/img/icons/pencil.png"/>
                            </mec:commandLink>
                            <mec:commandLink immediate="true"
                                             title="#{messages.LABEL_EXCLUIR}"
                                             action="#{manterSumarioAltaPosAltaController.excluirMotivoAlta}"
                                             profile="delete"
                                             ajax="true"
                                             render="panelListaAltaMotivo" >
                                <f:setPropertyActionListener target="#{manterSumarioAltaPosAltaController.currentSlider}" value="#{0}" for="command"/>
                                <f:setPropertyActionListener target="#{manterSumarioAltaPosAltaController.itemMotivoAltaSelecionado}" value="#{_altaMotivo}" for="command"/>
                            </mec:commandLink>
                        </p:column>
                        <p:column style="#{(_altaMotivo.idItem == manterSumarioAltaPosAltaController.sumarioAltaPosAltaMotivoVO.idItem) ? 'background-color:#EEE8AA' : ''}">
                            <f:facet name="header">
                                <h:outputText value="#{messages.LABEL_DESCRICAO}" />
                            </f:facet>
                            <h:outputText value="#{_altaMotivo.descricao}" style="text-transform:uppercase" />
                        </p:column>
                    </mec:serverDataTable>
                </p:outputPanel>
            </p:outputPanel>
          </p:tab>
        </p:accordionPanel>
        <p:accordionPanel id="togglePanelPosAlta" style="margin: 5px 0px !important;" prependId="false">
	        <p:tab id="tabPosAlta_1" title="Plano Pós-Alta (Preenchimento obrigatório)" rendered="#{manterSumarioAltaController.validaAltanListaOrigemAlta()}">
	            <p:outputPanel id="panelPlanoPosAlta" layout="block">
	                <aghu:linha>
	                    <p:outputPanel id="fieldComboPlanoPosAlta"
	                                   rendered="#{manterSumarioAltaPosAltaController.planoPosAltaVO.idItem == null}"
	                                   layout="inline">
	                        <mec:selectOneMenu id="comboPlanoPosAlta"
	                                           items="#{manterSumarioAltaPosAltaController.listaComboPlanoAlta}"
	                                           itemLabel="descricao"
	                                           value="#{manterSumarioAltaPosAltaController.indiceSelecionadoPlanoPosAlta}"
	                                           ajax="true"
	                                           process="@this">
	                            <p:ajax event="change" listener="#{manterSumarioAltaPosAltaController.changeComboPlanoPosAlta}" 
	                            		update="@(#panelPlanoPosAlta) @(#panelListaPlanoPosAlta)"/>
	                            <f:setPropertyActionListener target="#{manterSumarioAltaPosAltaController.currentSlider}" value="#{1}" for="command"/>
	                        </mec:selectOneMenu>
	                    </p:outputPanel>
	                    <mec:inputText maxlength="240"
	                                   style="width: 595px"
	                                   value="#{manterSumarioAltaPosAltaController.planoPosAltaVO.planoPosAlta.descricao}"
	                                   rendered="#{manterSumarioAltaPosAltaController.planoPosAltaVO.idItem != null}"
	                                   readonly="true"
	                                   id="readOnlyComboPlanoPosAlta" />
	                </aghu:linha>
	                <aghu:linha>
	                    <p:outputPanel id="panelPlanoPosAltaOpcionais"
	                                   rendered="#{manterSumarioAltaPosAltaController.planoPosAltaVO.exigeComplemento}"
	                                   layout="inline">
	                        <mec:inputText label="#{messages.LABEL_COMPLEMENTO_TIPO_DIETA}"
	                                       required="true"
	                                       title="#{messages.LABEL_COMPLEMENTO_PLANOPOSALTA_HELP}"
	                                       size="240" maxlength="120" style="width: 595px"
	                                       value="#{manterSumarioAltaPosAltaController.planoPosAltaVO.complemento}"
	                                       bypassUpdates="false" id="complementoPlanoPosAlta" >
	                            <p:ajax event="change" bypassUpdates="false" process="@this"/>
	                        </mec:inputText>
	                        <aghu:acao newLine="false">
	                            <mec:commandButton id="btGravarPlanoPosAlta"
	                                               rendered="#{manterSumarioAltaPosAltaController.planoPosAltaVO.idItem == null}"
	                                               action="#{manterSumarioAltaPosAltaController.gravarPlanoPosAlta}"
	                                               value="#{messages.LABEL_GRAVAR}"
	                                               profile="ok"
	                                               ajax="true"
	                                               process="@(#panelPlanoPosAlta) @(#panelListaPlanoPosAlta)"
	                                               render="panelListaPlanoPosAlta,panelPlanoPosAlta" />
	                            <mec:commandButton id="btAtualizarPlanoPosAlta"
	                                               rendered="#{manterSumarioAltaPosAltaController.planoPosAltaVO.idItem != null}"
	                                               disabled="#{manterSumarioAltaPosAltaController.itemEdicaoCirurgias.origemListaCombo}"
	                                               action="#{manterSumarioAltaPosAltaController.atualizarPlanoPosAlta}"
	                                               value="#{messages.LABEL_ALTERAR}" profile="ok" ajax="true"
	                                               process="@(#panelPlanoPosAlta) @(#panelListaPlanoPosAlta)"
	                                               render="panelListaPlanoPosAlta, panelPlanoPosAlta" />
	                            <mec:commandButton id="btCancelarPlanoPosAlta"
	                                               rendered="#{manterSumarioAltaPosAltaController.planoPosAltaVO.idItem != null}"
	                                               action="#{manterSumarioAltaPosAltaController.cancelarPlanoPosAlta}"
	                                               process="@(#panelPlanoPosAlta) @(#panelListaPlanoPosAlta)"
	                                               value="#{messages.LABEL_CANCELAR}"
	                                               styleClass="bt_cancel_edit bt_cinza" ajax="true"
	                                               render="panelListaPlanoPosAlta, panelPlanoPosAlta" />
	                        </aghu:acao>
	                    </p:outputPanel>
	                </aghu:linha>
	            </p:outputPanel>
	            <p:outputPanel id="panelListaPlanoPosAlta" layout="inline">
	                <p:outputPanel rendered="#{not empty manterSumarioAltaPosAltaController.listaAltaPlano}">
	                    <mec:serverDataTable rendered="#{not empty manterSumarioAltaPosAltaController.listaAltaPlano}"
	                                         style="border-top: 0 none !important"
	                                         list="#{manterSumarioAltaPosAltaController.listaAltaPlano}"
	                                         scrollHeight="100"
	                                         scrollable="true"
	                                         controller="manterSumarioAltaPosAltaController">
	                        <c:set var="_altaPlano" value="#{item}" />
	                        <p:column style="width:60px; #{(_altaPlano.idItem == manterSumarioAltaPosAltaController.planoPosAltaVO.idItem) ? 'background-color:#EEE8AA' : ''}">
	                            <f:facet name="header">
	                                <h:outputText value="#{messages.LABEL_ACOES}" />
	                            </f:facet>
	                            <mec:commandLink rendered="#{(_altaPlano.exigeComplemento)}" 
	                                             title="#{messages.LABEL_EDITAR}"
	                                             action="#{manterSumarioAltaPosAltaController.editarPlanoPosAlta}"
	                                             process="@(#panelPlanoPosAlta) @(#panelListaPlanoPosAlta)"
	                                             ajax="true"
	                                             render="panelListaPlanoPosAlta, panelPlanoPosAlta">
	                                <f:setPropertyActionListener target="#{manterSumarioAltaPosAltaController.currentSlider}" value="#{1}" for="command"/>
	                                <f:setPropertyActionListener target="#{manterSumarioAltaPosAltaController.itemPlanoPosAltaSelecionado}" value="#{_altaPlano}" for="command"/>
	                                <p:graphicImage value="/resources/img/icons/pencil.png"/>
	                            </mec:commandLink>
	                            <mec:commandLink title="#{messages.LABEL_EXCLUIR}"
	                                             action="#{manterSumarioAltaPosAltaController.excluirPlanoPosAlta}"
	                                             profile="delete"
	                                             immediate="true"
	                                             ajax="true"
	                                             process="@(#panelPlanoPosAlta) @(#panelListaPlanoPosAlta)"
	                                             render="panelListaPlanoPosAlta,panelPlanoPosAlta">
	                                <f:setPropertyActionListener target="#{manterSumarioAltaPosAltaController.currentSlider}" value="#{1}" for="command"/>
	                                <f:setPropertyActionListener target="#{manterSumarioAltaPosAltaController.itemPlanoPosAltaSelecionado}" value="#{_altaPlano}" for="command"/>
	                            </mec:commandLink>
	                        </p:column>
	                        <p:column style="#{(_altaPlano.idItem == manterSumarioAltaPosAltaController.planoPosAltaVO.idItem) ? 'background-color:#EEE8AA' : ''}">
	                            <f:facet name="header">
	                                <h:outputText value="#{messages.LABEL_DESCRICAO}" />
	                            </f:facet>
	                            <h:outputText value="#{_altaPlano.descricao}" style="text-transform:uppercase" />
	                        </p:column>
	                    </mec:serverDataTable>
	                </p:outputPanel>
	            </p:outputPanel>
	        </p:tab>
		</p:accordionPanel>
		<p:accordionPanel id="togglePanelRecomendacoes" style="margin: 5px 0px !important;" prependId="false">	    
		  <p:tab id="tabPosAlta_2" title="Recomendações na Alta Cadastradas">
	        <p:outputPanel id="panelAltaCadastrada" layout="block">
			  <p:outputPanel id="listas" layout="block">
			  	<a id="focoRecomendacoes"/>
			  	<p:remoteCommand action="#{manterSumarioAltaPosAltaController.desabilitarFocoCabecalho()}" oncomplete="focarCabecalho('focoRecomendacoes')" autoRun="#{manterSumarioAltaPosAltaController.focoCabecalho}" immediate="true"/>
			    <table width="100%" id="tableRecomendacaoAltaCadastrada">
				  <tr>
				    <td width="49%" rowspan="1" colspan="1">
					  <p:outputPanel id="panelRecomendacaoCadastrada" 
					  		rendered="#{not empty manterSumarioAltaPosAltaController.listaAltaCadastrada}" 
					  		layout="block" 
					  		style="width: 100%;">
					    <mec:serverDataTable id="tblistaRecomendacaoCadastrada" 
					    	style="border-top: 0 none !important"
					    	rendered="#{not empty manterSumarioAltaPosAltaController.listaAltaCadastrada}"
					    	list="#{manterSumarioAltaPosAltaController.listaAltaCadastrada}"
					    	controller="manterSumarioAltaPosAltaController"
					    	scrollHeight="100"
					    	scrollable="true">
						  <c:set var="altaCadastrada" value="#{item}" />
					      <p:column>
						    <f:facet name="header">
							  <h:outputText value="#{messages.TITLE_RECOMENDACOES_CADASTRADAS}"/>
						    </f:facet>
						    <p:column style="width:60px;">
							  <f:facet name="header">
							    <h:outputText value="#{messages.LABEL_ACOES}" />
                              </f:facet>
							  <h:selectBooleanCheckbox name="recCadastradasCheck" id="recCadastradasCheck" value="#{altaCadastrada.gravar}" checked="#{altaCadastrada.gravar}">
                                <p:ajax event="click" bypassUpdates="false" process="@this"/>
							  </h:selectBooleanCheckbox>
					        </p:column>
						    <p:column width="auto">
							  <h:outputText value="#{altaCadastrada.descricao}" style="text-transform:uppercase" />
						    </p:column>
						  </p:column>
					    </mec:serverDataTable>
				      </p:outputPanel>
				    </td>
				    <td width="49%" rowspan="1" colspan="1">
 					  <p:outputPanel id="panelRecomendacaoCadastradaSelecionada" layout="block" style="width: 100%;">
				        <p:outputPanel rendered="#{not empty manterSumarioAltaPosAltaController.listaAltasCadastradasGravadas}" layout="inline">
					      <mec:serverDataTable id="tblistaRecomendacaoCadastradaSelecionada" 
					    		style="border-top: 0 none !important" 
								rendered="#{not empty manterSumarioAltaPosAltaController.listaAltasCadastradasGravadas}"
								list="#{manterSumarioAltaPosAltaController.listaAltasCadastradasGravadas}"
								controller="manterSumarioAltaPosAltaController"
								scrollHeight="100"
								scrollable="true">
						    <c:set var="altaCadastradaSelecionada" value="#{item}" />
						    <p:column style="width:60px;">
						      <f:facet name="header">
						        <h:outputText value="#{messages.LABEL_ACOES}" />
						      </f:facet>
						      <mec:commandLink rendered="#{altaCadastrada.emEdicao}" styleClass=" silk-blank silk-icon" ajax="true" />
						      <mec:commandLink rendered="#{not altaCadastradaSelecionada.emEdicao}" 
						        	title="#{messages.LABEL_EXCLUIR}"
									action="#{manterSumarioAltaPosAltaController.removerAltasCadastradasSelecionadas}"
									profile="delete"
									process="@this,panelRecomendacaoCadastrada" 
									ajax="true" 
									render="listas">
						        <f:setPropertyActionListener target="#{manterSumarioAltaPosAltaController.currentSlider}" value="#{2}" for="command"/>
						        <f:setPropertyActionListener target="#{manterSumarioAltaPosAltaController.altaRecomendacaoSelecionado}" value="#{altaCadastradaSelecionada}" for="command"/>
						      </mec:commandLink>
					        </p:column>
						    <p:column width="auto">											
							  <f:facet name="header">
							    <h:outputText value="Recomendações Cadastradas Selecionadas" />
							  </f:facet>										    
							  <h:inputText value="#{manterSumarioAltaPosAltaController.altaCadastradaVO.descricao}" 
									maxlength="500" size="250"
									style="width: 350px"
									rendered="#{altaCadastrada.emEdicao}"
									bypassUpdates="false"
									id="descricaoRecomendacaoAltaCadastrada"/>
						      <mec:commandLink rendered="#{altaCadastradaSelecionada.emEdicao}" 
						    		title="#{messages.LABEL_ALTERAR}"
									action="#{manterSumarioAltaPosAltaController.atualizarAltaCadastrada}"
									styleClass="silk-icon silk-checked" 
									ajax="true" 
									render="panelAltaCadastrada">
							    <f:setPropertyActionListener target="#{manterSumarioAltaPosAltaController.currentSlider}" value="#{2}" for="command"/>
							    <f:setPropertyActionListener target="#{manterSumarioAltaPosAltaController.altaRecomendacaoSelecionado}" value="#{altaCadastradaSelecionada}" for="command"/>
							  </mec:commandLink>
							  <mec:commandLink rendered="#{altaCadastradaSelecionada.emEdicao}" 
									title="#{messages.LABEL_CANCELAR}"
									action="#{manterSumarioAltaPosAltaController.cancelarAltaCadastrada}"
									styleClass="silk-icon silk-cancel"
									ajax="true" 
									render="panelAltaCadastrada">
							    <f:setPropertyActionListener target="#{manterSumarioAltaPosAltaController.currentSlider}" value="#{2}" for="command"/>
							    <f:setPropertyActionListener target="#{manterSumarioAltaPosAltaController.altaRecomendacaoSelecionado}" value="#{altaCadastradaSelecionada}" for="command"/>
							  </mec:commandLink>
							  <h:outputText value="#{altaCadastrada.descricao}" rendered="#{not altaCadastrada.emEdicao}" style="text-transform:uppercase"/>
						    </p:column>
						  </mec:serverDataTable>
                        </p:outputPanel>
                      </p:outputPanel>
			        </td>
			      </tr>
                </table>
		      </p:outputPanel>
			  <aghu:acao>
 			    <mec:commandButton id="btGravarAltaCad"  
 			    	rendered="#{not manterSumarioAltaPosAltaController.altaCadastradaVO.emEdicao}"
					action="#{manterSumarioAltaPosAltaController.gravarAltasCadastradasSelecionadas}"
					value="#{messages.LABEL_GRAVAR}"
                    immediate="true"
                    process="@form"
					disabled="#{empty manterSumarioAltaPosAltaController.listaAltaCadastrada}"
					profile="ok" ajax="true" render="listas" />
				<mec:commandButton id="btCadastroRecomendacoes" 
				  	value="Cadastrar Recomendações"
                    immediate="true"
				  	action="#{manterSumarioAltaPosAltaController.cadastroRecomendacoes}"
				  	ajax="true" styleClass="bt_cinza">
                  <f:setPropertyActionListener target="#{recomendacoesAltaUsuarioPaginatorController.voltarPara}" value="prescricaomedica-manterSumarioAlta" for="command"/>
				</mec:commandButton>
			  </aghu:acao>
		    </p:outputPanel>
		  </p:tab>
		  </p:accordionPanel>
		  <p:accordionPanel id="togglePanelAltaItensPrescricao" style="margin: 5px 0px !important;" prependId="false">
			  <p:tab id="tabPosAlta_3" title="#{messages.TITLE_ALTA_ITEM_PRESCRICAO}">
			    <p:outputPanel id="panelAltaItensPrescricao" layout="block">
				  <table width="100%">
				    <tr valign="top">
					  <td width="49%" rowspan="1" colspan="1">
					    <p:outputPanel layout="block" style="width: 100%;">
					      <mec:serverDataTable id="tabelaAltaItemPrescricao" 
					    		style="border-top: 0 none !important" 
								list="#{manterSumarioAltaPosAltaController.listItemPrescricaoMedicaVO}"
								controller="manterSumarioAltaPosAltaController"
								scrollHeight="100"
								scrollable="true">
						    <c:set var="itemPrescricaoMedica" value="#{item}" />
						    <p:column>
							  <f:facet name="header">
							    <h:outputText value="#{messages.TITLE_ITEM_PRESCRICAO_CADASTRADO}" />
							  </f:facet>
							  <p:column width="30px">
							    <f:facet name="header">
							      <h:outputText value="#{messages.TITLE_ITEM_PRESCRICAO_CADASTRADO}" />
						        </f:facet>
							    <h:selectBooleanCheckbox id="marcador" 
							    	value="#{itemPrescricaoMedica.marcado}" 
									title="Selecionar">
								  <p:ajax event="click" bypassUpdates="false" process="@this"/>
							    </h:selectBooleanCheckbox>
							  </p:column>
							  <p:column width="18px" title="#{itemPrescricaoMedica.tipo.titulo}">
							    <div class="silk-icon icon-#{itemPrescricaoMedica.tipo.toString().toLowerCase()}" 
							  		style="cursor: default !important;" 
								    title="#{itemPrescricaoMedica.tipo.titulo}" />
							  </p:column>
							  <p:column width="auto" 
									title="#{itemPrescricaoMedica.descricao}"
									style="#{(itemPrescricaoMedica.mesclado) ? 'background-color:#FF6347;max-width: 230px; word-wrap: break-word;' : 'max-width: 230px; word-wrap: break-word;'}">
							    <h:outputText value="#{' '} #{itemPrescricaoMedica.descricao}" escape="false" style="text-transform:uppercase" />
						      </p:column>
					        </p:column>
						  </mec:serverDataTable>
					    </p:outputPanel>
					  </td>
					  <td width="49%" rowspan="1" colspan="1">
					    <p:outputPanel rendered="#{not empty manterSumarioAltaPosAltaController.listItemPrescricaoMedicaGravadaVO}"  layout="block" style="width: 100%;">
					      <mec:serverDataTable id="tblistaItemPrescricaoGravada" 
					    		style="border-top: 0 none !important"
								rendered="#{not empty manterSumarioAltaPosAltaController.listItemPrescricaoMedicaGravadaVO}"
								list="#{manterSumarioAltaPosAltaController.listItemPrescricaoMedicaGravadaVO}"
								scrollable="true">
						    <c:set var="itemPrescricaoMedica" value="#{item}" />
						    <p:column>
						      <f:facet name="header">
						        <h:outputText value="#{messages.TITLE_ITEM_PRESCRICAO_CADASTRADO_SELECIONADO}"/>
						      </f:facet>
						      <p:column width="50px">
	 					        <f:facet name="header">
	 					          <h:outputText value="#{messages.LABEL_ACOES}" />
						        </f:facet>   
						        <mec:commandLink rendered="#{itemPrescricaoMedica.emEdicao}" 
						      		styleClass=" silk-blank silk-icon" ajax="true" />
						        <mec:commandLink title="#{messages.LABEL_EDITAR}" 
						      		rendered="#{not itemPrescricaoMedica.emEdicao}"
									action="#{manterSumarioAltaPosAltaController.editarAltaItemPrescricao}"
									profile="edit"
	                                immediate="true"
	                                ajax="true"
									render="panelAltaItensPrescricao">
								  <f:setPropertyActionListener target="#{manterSumarioAltaPosAltaController.currentSlider}" value="#{3}" for="command"/>
								  <f:setPropertyActionListener target="#{manterSumarioAltaPosAltaController.itemPrescricaoMedicaSelecionado}" value="#{itemPrescricaoMedica}" for="command"/>
						        </mec:commandLink>														 
						        <mec:commandLink title="#{messages.LABEL_EXCLUIR}" 
						      		action="#{manterSumarioAltaPosAltaController.removerAltaItemPrescricao}"
									profile="delete"
	                                immediate="true"
	                                ajax="true"
									render="panelAltaItensPrescricao">
						          <f:setPropertyActionListener target="#{manterSumarioAltaPosAltaController.currentSlider}" value="#{3}" for="command"/>
						          <f:setPropertyActionListener target="#{manterSumarioAltaPosAltaController.itemPrescricaoMedicaSelecionado}" value="#{itemPrescricaoMedica}" for="command"/>
						        </mec:commandLink>;
	                          </p:column>
							  <p:column width="18px" title="#{itemPrescricaoMedica.tipo.titulo}">
						        <div class="silk-icon icon-#{itemPrescricaoMedica.tipo.toString().toLowerCase()}" 
						      		style="cursor: default !important;" 
		                          	title="#{itemPrescricaoMedica.tipo.titulo}" />
						      </p:column>
						      <p:column width="auto" style="word-wrap: break-word;">
						        <p:inputText id="descricaoItemPrescricaoMedica"
						      		value="#{manterSumarioAltaPosAltaController.descricaoItemPrescricaoMedica}"
									rendered="#{itemPrescricaoMedica.emEdicao}"
									maxlength="500"
	                                size="250"
									style="text-transform:uppercase; width: 350px;">
	                                <p:ajax event="change" bypassUpdates="false" process="@this"/>
								</p:inputText>
						        <mec:commandLink title="#{messages.LABEL_ALTERAR}" 
						      		rendered="#{itemPrescricaoMedica.emEdicao}"
									styleClass="silk-icon silk-checked"
									action="#{manterSumarioAltaPosAltaController.atualizarAltaItemPrescricao}"
	                                immediate="true"
									ajax="true"
	                                process="@(#descricaoItemPrescricaoMedica)"
									render="panelAltaItensPrescricao">
						          <f:setPropertyActionListener target="#{manterSumarioAltaPosAltaController.currentSlider}" value="#{3}" for="command"/>
						          <f:setPropertyActionListener target="#{manterSumarioAltaPosAltaController.itemPrescricaoMedicaSelecionado}" value="#{itemPrescricaoMedica}" for="command"/>
						        </mec:commandLink>
						        <mec:commandLink title="#{messages.LABEL_CANCELAR}" 
						      		rendered="#{itemPrescricaoMedica.emEdicao}"
	                                immediate="true"
									styleClass="silk-icon silk-cancel"
									action="#{manterSumarioAltaPosAltaController.cancelarDescricaoItemPrescricaoMedica}"
									ajax="true" render="panelAltaItensPrescricao">
						          <f:setPropertyActionListener target="#{manterSumarioAltaPosAltaController.currentSlider}" value="#{3}" for="command"/>
						          <f:setPropertyActionListener target="#{manterSumarioAltaPosAltaController.itemPrescricaoMedicaSelecionado}" value="#{itemPrescricaoMedica}" for="command"/>
						        </mec:commandLink>
						        <h:outputText value="#{itemPrescricaoMedica.descricaoDB}" 
						      		escape="true"
									rendered="#{not itemPrescricaoMedica.emEdicao}"
									style="text-transform:uppercase" />
						      </p:column>
						    </p:column>
						  </mec:serverDataTable>
				        </p:outputPanel>
					  </td>
				    </tr>
				  </table>
				  <aghu:acao>
				    <mec:commandButton id="btGravarAltaItemPrescricao" 
				  		action="#{manterSumarioAltaPosAltaController.gravarAltaItemPrescricao}"
						value="#{messages.LABEL_GRAVAR}"
	                    immediate="true"
						rendered="#{not empty manterSumarioAltaPosAltaController.listItemPrescricaoMedicaVO}"
						profile="ok" ajax="true" render="panelAltaItensPrescricao" />
				  </aghu:acao>
			    </p:outputPanel>
			  </p:tab>
		  </p:accordionPanel>
		  <p:accordionPanel id="togglePanelAltaNaoCadastrada" style="margin: 5px 0px !important;" prependId="false">
			  <p:tab id="tabPosAlta_4" title="Recomendações na Alta Não Cadastradas">
			    <p:outputPanel id="panelAltaNaoCadastrada">
			      <aghu:linha>
			        <mec:inputText label="#{messages.LABEL_DESCRICAO}" 
			      		title="#{messages.LABEL_DESCRICAO_HELP}"
					  	value="#{manterSumarioAltaPosAltaController.altaNaoCadastradoVO.descricao}"
					  	required="true"
					  	styleClassField="frm_obrigatorio" size="240" maxlength="500"
					  	style="width: 595px" bypassUpdates="false"
					  	id="complementoAltaNaoCadastrada" />
			        <aghu:acao newLine="false">
			          <mec:commandButton id="btGravarAltaNaoCadastrada" 
			        		action="#{manterSumarioAltaPosAltaController.gravarAltaNaoCadastrado}"
							value="#{messages.LABEL_GRAVAR}"
							rendered="#{not manterSumarioAltaPosAltaController.altaNaoCadastradoVO.emEdicao}"
							process="@this @(#panelAltaNaoCadastrada)"
							render="panelAltaNaoCadastrada"
							profile="ok" 
							ajax="true" />
			          <mec:commandButton id="btAtualizarAltaNaoCadastrada" 
					  		rendered="#{manterSumarioAltaPosAltaController.altaNaoCadastradoVO.emEdicao}"
							action="#{manterSumarioAltaPosAltaController.atualizarAltaNaoCadastrado}"
							value="#{messages.LABEL_ALTERAR}" 
							process="@this @(#panelAltaNaoCadastrada)"
							render="panelAltaNaoCadastrada"
							profile="ok" 
							ajax="true" />
			          <mec:commandButton id="btCancelarAltaNaoCadastrada"
							rendered="#{manterSumarioAltaPosAltaController.altaNaoCadastradoVO.emEdicao}"
							action="#{manterSumarioAltaPosAltaController.cancelarAltaNaoCadastrado}"
							value="#{messages.LABEL_CANCELAR}"
							styleClass="bt_cancel_edit bt_cinza" 
							process="@this @(#panelAltaNaoCadastrada)"
							render="panelAltaNaoCadastrada"
							ajax="true" />
			        </aghu:acao>
				  </aghu:linha>
				  <aghu:linha>
				    <p:outputPanel id="panelListaRecomendacoesNaoCadastradas" layout="block" style="width: 100%;">
	 			      <p:outputPanel rendered="#{not empty manterSumarioAltaPosAltaController.listaAltaNaoCadastrado}">
					    <mec:serverDataTable id="tblistaAltaNaoCadastrado" 
					  		style="border-top: 0 none !important"
							rendered="#{not empty manterSumarioAltaPosAltaController.listaAltaNaoCadastrado}"
							list="#{manterSumarioAltaPosAltaController.listaAltaNaoCadastrado}"
							scrollable="true">
					      <c:set var="altaNaoCadastrado" value="#{item}" />
					      <p:column style="#{(altaNaoCadastrado.id.seqp == manterSumarioAltaPosAltaController.altaNaoCadastradoVO.id.seqp) ? 'background-color:#EEE8AA;' : ''}width:60px;">
					        <f:facet name="header">
					          <h:outputText value="#{messages.LABEL_ACOES}" />
					        </f:facet>
					        <mec:commandLink title="#{messages.LABEL_EDITAR}" 
					       		action="#{manterSumarioAltaPosAltaController.editarAltaNaoCadastrado}"
								rendered="#{(altaNaoCadastrado.id.seqp != manterSumarioAltaPosAltaController.altaNaoCadastradoVO.id.seqp)}"
								profile="edit"
								process="@this"
								render="panelAltaNaoCadastrada" 
								ajax="true">
					          <f:setPropertyActionListener target="#{manterSumarioAltaPosAltaController.currentSlider}" value="#{4}" for="command"/>
					          <f:setPropertyActionListener target="#{manterSumarioAltaPosAltaController.itemAltaRecomendacaoSelecionado}" value="#{altaNaoCadastrado}" for="command"/>
					        </mec:commandLink>
					        <mec:commandLink rendered="#{(altaNaoCadastrado.id.seqp == manterSumarioAltaPosAltaController.altaNaoCadastradoVO.id.seqp)}" 
					        	styleClass=" silk-blank silk-icon" ajax="true" />
						    <mec:commandLink immediate="true" 
								title="#{messages.LABEL_EXCLUIR}"
								action="#{manterSumarioAltaPosAltaController.excluirAltaNaoCadastradao}"
								profile="delete" 
								process="@this"
								render="panelAltaNaoCadastrada"
								ajax="true">
						      <f:setPropertyActionListener target="#{manterSumarioAltaPosAltaController.currentSlider}" value="#{4}" for="command"/>
							  <f:setPropertyActionListener target="#{manterSumarioAltaPosAltaController.itemAltaRecomendacaoSelecionado}" value="#{altaNaoCadastrado}" for="command"/>
						    </mec:commandLink>
						  </p:column>
					      <p:column style="#{(altaNaoCadastrado.id.seqp == manterSumarioAltaPosAltaController.altaNaoCadastradoVO.id.seqp) ? 'background-color:#EEE8AA' : ''}">
					        <f:facet name="header">
					          <h:outputText value="#{messages.LABEL_DESCRICAO}" />
					        </f:facet>
					        <h:outputText value="#{altaNaoCadastrado.descricao}" style="text-transform:uppercase" />
					      </p:column>
					    </mec:serverDataTable> 	
					  </p:outputPanel>
	                </p:outputPanel>
	              </aghu:linha>
	            </p:outputPanel>
			  </p:tab>
		  </p:accordionPanel>
		  <p:accordionPanel id="togglePanelMedicamentosPrescritos" style="margin: 5px 0px !important;" prependId="false">
			  <p:tab id="tabPosAlta_5" title="Medicamentos Prescritos na Alta">
			    <p:outputPanel id="panelMedicamentosPrescritos">
		    	 <aghu:linha>
		    	 	<style type="text/css">
						 .ui-picklist-list{
							width: 390px !important;
						}
					
						.ui-picklist-button-add{
							margin-top: 130px !important;
						}
						.ui-picklist-button-remove{
							margin-top: -130px !important;
						}
						.ui-picklist-button-add-all{
							display:none !important;
						}
						.ui-picklist-button-remove-all{
							display:none !important;
						}
					</style>
					<p:pickList value="#{manterSumarioAltaPosAltaController.altaPrincReceitas}"  
		                var="altaPrincReceitas"  
		                itemLabel="#{altaPrincReceitas}"  
		                itemValue="#{altaPrincReceitas}"
		                addLabel="#{messages.TITLE_EXCLUIDOS_MPM}" 
		                removeLabel="#{messages.TITLE_PRESCRITOS_MPM}"> 
		                 
		                  <f:facet name="sourceCaption"><h:outputText value="#{messages.LABEL_PRESCRITOS_MPM}"/></f:facet>
	       				  <f:facet name="targetCaption"><h:outputText value="#{messages.LABEL_EXCLUIDOS_MPM}"/></f:facet>
		                
		                  <p:ajax event="transfer" listener="#{manterSumarioAltaPosAltaController.onTransfer}" />
		                </p:pickList>
	                
		                <p:dialog modal="true" showEffect="fade" hideEffect="fade" widgetVar="cityDialog">  
					        <h:panelGrid id="displayCities" columns="2">  
					            <h:outputText value="Source: " style="font-weight:bold"/>  
					             <ui:repeat value="#{manterSumarioAltaPosAltaController.altaPrincReceitas.source}" var="item">  
					                <h:outputText value="#{item.descReceita}" style="margin-right:5px" /> 
					              
					            </ui:repeat>  
					  
					            <h:outputText value="Target: " style="font-weight:bold"/>  
					            <ui:repeat value="#{manterSumarioAltaPosAltaController.altaPrincReceitas.target}" var="item">  
					                <h:outputText value="#{item.descReceita}" style="margin-right:5px" />  
					               
					            </ui:repeat>  
					        </h:panelGrid>  
					    </p:dialog> 
				  </aghu:linha>
				  <aghu:linha>
				       <aghu:acao newLine="false">
				              <mec:commandButton id="btGravarMedicamentosPrescritos" 
				        		action="#{manterSumarioAltaPosAltaController.gravarMpmAlta}"
								value="#{messages.LABEL_GRAVAR}"
								profile="ok"
								immediate="true" 
								ajax="true" 
								render="panelMedicamentosPrescritos"
								process="@this"/>
				        </aghu:acao>
				    </aghu:linha>
	         	</p:outputPanel>
		 	  </p:tab>
		  </p:accordionPanel>
		  <p:accordionPanel id="togglePanelConsultarExames" style="margin: 5px 0px !important;" prependId="false">
		  <p:tab id="tabPosAlta_6" title="Consultas/Exames">
		    <p:outputPanel id="panelConsultasExames">
			  <aghu:linha>
			    <p:outputPanel id="panelListaConsultasExames" layout="block" style="width: 100%;">
			    	<a id="focoConsultaExames"/>
			    	<p:remoteCommand action="#{manterSumarioAltaPosAltaController.desabilitarFocoConsultaExames()}" oncomplete="focarCabecalho('focoConsultaExames')" autoRun="#{manterSumarioAltaPosAltaController.focoConsultaExames}" immediate="true"/>
				    <mec:serverDataTable id="tblistaConsultas" 
				  		style="border-top: 0 none !important"
						list="#{manterSumarioAltaPosAltaController.listaConsultas}"
						scrollable="true">
				      <c:set var="_consulta" value="#{item}" />
			          <p:column headerText="Ações" styleClass="first-column auto-adjust" exportable="false"> 
			            <mec:commandLink title="#{messages.LABEL_EXAMES}"
			              styleClass=" silk-exame silk-icon"
			              immediate="true"
			              process="@this"
			              action="#{manterSumarioAltaPosAltaController.realizarChamadaSolicitarExame}" 
			              disabled="#{listaPacientesInternadosController.disableButtonSolicitarExame or empty listaPacientesInternadosController.pacienteListaProfissionalVO}"
			              rendered="#{listaPacientesInternadosController.verificarModuloExameAtivo()}"> 
 					          <f:setPropertyActionListener target="#{manterSumarioAltaPosAltaController.numeroConsulta}" value="#{_consulta.numero}" for="command"/>
			            </mec:commandLink>
					  </p:column>  
			          <p:column> 
			            <f:facet name="header"> 
			              <h:outputText value="#{messages.LABEL_CONSULTA}"/> 
			            </f:facet> 
			            <p:outputPanel id="numeroConsulta" layout="block"> 
			            	<h:outputText value="#{_consulta.numero}"/>  
			           	</p:outputPanel>
			            <p:tooltip for="numeroConsulta" trackMouse="true" > 
			              <h:outputText value="#{messages.LABEL_PACIENTE}: #{_consulta.paciente.nome}"/>  
			              <br clear="none"/>  
			              <h:outputText value="#{messages.LABEL_PAGADOR}: #{_consulta.pagador.descricao}    "/>  
			              <h:outputText value="#{messages.LABEL_AUTORIZACAO_CONSULTA_PACIENTE}: "/>  
			              <h:outputText value="#{_consulta.tipoAgendamento.descricao} "/>  
			              <br clear="none"/>  
			              <h:outputText value="#{messages.LABEL_EMITENTE_CONSULTA_PACIENTE}: "/>  
			              <h:outputText value="#{manterSumarioAltaPosAltaController.obterResponsavelMarcacaoConsulta(_consulta.numero)}" />
			              <br clear="none"/>  
			              <h:outputText value="#{messages.LABEL_EM_CONSULTA_PACIENTE}: "/>
			              <h:outputText value="#{manterSumarioAltaPosAltaController.getDthrMarcacao(_consulta.dthrMarcacao)} " /> 
			              <br clear="none"/>  
			              <br clear="none"/>  
			              <h:outputText value="#{messages.LABEL_NUM_CONSULTA_ANTERIOR_CONSULTA_PACIENTE}: "/>  
			              <h:outputText value="#{_consulta.consulta.numero}"/> 
			            </p:tooltip> 
			          </p:column>  
			          <p:column> 
			            <f:facet name="header"> 
			              <h:outputText value="#{messages.LABEL_DATAHORA_CONSULTA_PACIENTE}"/> 
			            </f:facet>  
			           	<p:outputPanel id="dataConsulta" layout="block">
				            <h:outputText value="#{_consulta.dtConsulta}"> 
				              <f:convertDateTime pattern="dd/MM/yyyy HH:mm"/> 
				            </h:outputText> 
			            </p:outputPanel>
			            <p:tooltip for="dataConsulta" trackMouse="true">
							<h:outputText value="#{messages.LABEL_DIA_DA_SEMANA}: #{manterSumarioAltaPosAltaController.obterDiaSemana(_consulta.dtConsulta)}" />
							<br/>
						</p:tooltip>	
			          </p:column>  
			          <p:column> 
			            <f:facet name="header"> 
			              <h:outputText value="#{messages.LABEL_CONDICAO_ATENDIMENTO_CONSULTA_PACIENTE}"/> 
			            </f:facet>  
			            <h:outputText value="#{_consulta.condicaoAtendimento.descricao}"/> 
			          </p:column>  
			          <p:column> 
			            <f:facet name="header"> 
			              <h:outputText value="#{messages.LABEL_ESPECIALIDADE_AGENDA}"/> 
			            </f:facet>
			            <p:outputPanel id="siglaEspecialidade" layout="block">   
			            	<h:outputText value="#{_consulta.gradeAgendamenConsulta.especialidade.sigla}"/>  
			           	</p:outputPanel>
			            <p:tooltip trackMouse="true" for="siglaEspecialidade"> 
			              <h:outputText value="#{_consulta.gradeAgendamenConsulta.especialidade.nomeEspecialidade}"/> 
			            </p:tooltip> 
			          </p:column>  
			          <p:column> 
			            <f:facet name="header"> 
			              <h:outputText value="#{manterSumarioAltaPosAltaController.labelZonaSala}"/> 
			            </f:facet>  
			            <h:outputText value="#{_consulta.gradeAgendamenConsulta.siglaUnfSala.sigla} - #{_consulta.gradeAgendamenConsulta.siglaUnfSala.id.sala}"/> 
			          </p:column>  
			          <p:column> 
			            <f:facet name="header"> 
			              <h:outputText value="#{messages.LABEL_EQUIPE}"/> 
			            </f:facet>  
			            <h:outputText value="#{_consulta.gradeAgendamenConsulta.equipe.nome}"/> 
			          </p:column>  
			          <p:column> 
			            <f:facet name="header"> 
			              <h:outputText value="#{messages.LABEL_PROFISSIONAL}"/> 
			            </f:facet>  
			            <h:outputText value="#{_consulta.gradeAgendamenConsulta.profEspecialidade.rapServidor.pessoaFisica.nome}"/> 
			          </p:column>  
				    </mec:serverDataTable> 	
                </p:outputPanel>
              </aghu:linha>
			  <aghu:acao>
				<mec:commandButton id="btnovaConsulta" 
				  	value="Nova Consulta"
				  	disabled="#{not mf:hasPermission(securityController, '/ambulatorio/gradeagendamento/disponibilidadeHorarios.xhtml,render')}"
                    immediate="true"
				  	action="#{manterSumarioAltaPosAltaController.novaConsulta}"
				  	ajax="true" styleClass="bt_cinza" profile="ok">
                  <f:setPropertyActionListener target="#{disponibilidadeHorariosPaginatorController.cameFrom}" value="prescricaomedica-manterSumarioAlta" for="command"/>
                  <f:setPropertyActionListener target="#{disponibilidadeHorariosPaginatorController.atendimento}" value="#{manterSumarioAltaPosAltaController.altaSumario.atendimento}" for="command"/>
				</mec:commandButton>
			  </aghu:acao>
            </p:outputPanel>
		  </p:tab>	 	  
		</p:accordionPanel>
	  </aghu:panelGeral>
	</h:form>
  </ui:composition>
</html>
