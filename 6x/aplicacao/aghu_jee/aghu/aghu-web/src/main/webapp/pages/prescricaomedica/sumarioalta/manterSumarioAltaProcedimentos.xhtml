<?xml version="1.0" encoding="UTF-8"?>

<html xmlns="http://www.w3.org/1999/xhtml" xmlns:fn="http://xmlns.jcp.org/jsp/jstl/functions" xmlns:mec="http://xmlns.jcp.org/jsf/composite/components" xmlns:p="http://primefaces.org/ui" xmlns:pe="http://primefaces.org/ui/extensions" xmlns:aghu="http://xmlns.jcp.org/jsf/component" xmlns:ui="http://xmlns.jcp.org/jsf/facelets" xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:c="http://xmlns.jcp.org/jsp/jstl/core" xmlns:mf="http://www.mec.gov.br/taglib">  
  <ui:composition>  
    <h:form prependId="false" id="jsForm">  
      <aghu:panelGeral legend="#{messages.LABEL_PROCEDIMENTOS} - #{manterSumarioAltaController.prontuarioFormatado} - #{manterSumarioAltaController.altaSumario.nome}" > 
        <p:accordionPanel id="togglePanelCirurgiasRealizadas" prependId="false">   
          <p:tab title="Cirurgias Realizadas">  
            <p:outputPanel id="panelCirurgiasRealizadas" layout="block"> 
              <p:outputPanel rendered="#{manterSumarioAltaProcedimentosController.mostrarPanelComboCirurgias}" layout="inline"> 
                <aghu:linha> 
                  <mec:field name="fdComboCirurgia" inputId="ComboCirurgia"> 
                    <p:selectOneMenu id="ComboCirurgia"
			        	style="width: 130px;"
			            onkeydown="enterInSelectField(event, '#{stopEnter}');"
			            styleClass="ui-inputfield ui-inputtext ui-widget ui-state-default ui-corner-all"
			            disabled="#{manterSumarioAltaProcedimentosController.itemEdicaoCirurgias.emEdicao or manterSumarioAltaProcedimentosController.itemEdicaoCirurgias.origemListaCombo}"
			            value="#{manterSumarioAltaProcedimentosController.itemSelecionadoComboCirurgias}">
			            <f:converter converterId="baseEntityConverter" />
			            <f:selectItem itemValue="" itemLabel="Selecione" noSelectionOption="true" />
			            <f:selectItems var="item" itemLabel="#{item.descricaoFormatada}" value="#{manterSumarioAltaProcedimentosController.listaComboCirurgias}" itemValue="#{item}"/>
						<p:ajax event="change" listener="#{manterSumarioAltaProcedimentosController.adicionarItemCirurgias}" process="@this" update="@(#panelCirurgiasRealizadas) @(#tabelaCirurgiasRealizadas)" />
					</p:selectOneMenu> 
                  </mec:field>
                  <aghu:acao newLine="false">  
                    <mec:commandButton id="btOutroItem" 
                    	action="#{manterSumarioAltaProcedimentosController.acaoOutroItem}" 
                  		value="#{messages.LABEL_SELECIONE_OUTRO}" 
                  		ajax="true" 
                   		render="panelOutrosItens" 
                   		process="@this" 
                   		styleClass="bt_cinza"/>
                  </aghu:acao> 
                </aghu:linha> 
              </p:outputPanel>  
              <p:outputPanel id="panelOutrosItens" layout="inline"> 
                <p:outputPanel rendered="#{manterSumarioAltaProcedimentosController.mostrarPanelOutrosItens}" layout="inline"> 
                  <aghu:linha>
                    <mec:inputTextData label="#{messages.LABEL_DATA}" 
                    	value="#{manterSumarioAltaProcedimentosController.dataCirurgia}"  
                    	readonly="#{manterSumarioAltaProcedimentosController.itemEdicaoCirurgias.origemListaCombo}" 
                    	id="dtCirurgia" 
                    	tipo="data"/>  
                    <mec:suggestionBox id="sbProcedimentoCirurgicos"
                    	label="#{messages.LABEL_CIRURGIAS_REALIZADAS}" 
                    	title="#{messages.TITLE_CIRURGIAS_REALIZADAS_SUMARIO_ALTA}" 
                    	suggestionAction="obterProcedimentoCirurgicos" 
                    	descricaoInput="seq" 
                    	descricaoLabel="descricao" 
                    	maxlength="30"  
                    	readonly="#{manterSumarioAltaProcedimentosController.itemEdicaoCirurgias.emEdicao or manterSumarioAltaProcedimentosController.itemEdicaoCirurgias.origemListaCombo}"
                    	controller="#{manterSumarioAltaProcedimentosController}" 
                    	value="#{manterSumarioAltaProcedimentosController.procedimentoCirurgicos}"
                    	var="itemCirurg" itemValue="#{itemCirurg}"> 
                      <p:column> 
                        #{itemCirurg.descricao} 
                      </p:column> 
                    </mec:suggestionBox>
                    <aghu:acao newLine="false">
	                  <mec:commandButton id="btGravarCirurgiaRealizada" 
	                		rendered="#{not manterSumarioAltaProcedimentosController.itemEdicaoCirurgias.emEdicao}" 
	                		action="#{manterSumarioAltaProcedimentosController.gravarCirurgiasRealizadas}" 
	                		value="#{messages.LABEL_GRAVAR}" 
	                		profile="ok"
	                		process="@this @(#panelCirurgiasRealizadas)" 
	                 		ajax="true" 
	                 		render="panelCirurgiasRealizadas, tabelaCirurgiasRealizadas">
	                  </mec:commandButton>  
	                  <mec:commandButton id="btAtualizarCirurgiaRealizada" 
	                		rendered="#{manterSumarioAltaProcedimentosController.itemEdicaoCirurgias.emEdicao}" 
	                 		disabled="#{manterSumarioAltaProcedimentosController.itemEdicaoCirurgias.origemListaCombo}" 
	                 		action="#{manterSumarioAltaProcedimentosController.atualizarItemEmEdicaoCirurgiasRealizadas}" 
	                 		value="#{messages.LABEL_ALTERAR}" 
	                 		profile="ok"
	                 		process="@this @(#panelOutrosItens)"
	                 		ajax="true" 
	                 		render="panelCirurgiasRealizadas, tabelaCirurgiasRealizadas">
	                  </mec:commandButton>  
	                  <mec:commandButton id="btCancelarCirurgiaRealizada" 
	                		rendered="#{manterSumarioAltaProcedimentosController.itemEdicaoCirurgias.emEdicao}" 
	                		action="#{manterSumarioAltaProcedimentosController.cancelarItemEmEdicaoCirurgiasRealizadas}" 
	                 		value="#{messages.LABEL_CANCELAR_EDICAO}" 
	                 		styleClass="bt_cancel_edit bt_cinza"
	                 		process="@this" 
	                 		ajax="true" 
	                 		render="panelCirurgiasRealizadas, tabelaCirurgiasRealizadas">
	                  </mec:commandButton> 
	                </aghu:acao>
                  </aghu:linha>
                </p:outputPanel> 
              </p:outputPanel> 
            </p:outputPanel>
	        <p:outputPanel> 
	          <mec:serverDataTable id="tabelaCirurgiasRealizadas" 
	          		style="border-top: 0 none !important" 
	           		rendered="true" 
	           		list="#{manterSumarioAltaProcedimentosController.listaGridCirurgias}"
	           		scrollHeight="100"  
	           		scrollable="true"
	           		controller="manterSumarioAltaProcedimentosController"> 
	            <c:set var="itemCirurgiaRealizada" value="#{item}"/>  
	            <p:column style="#{itemCirurgiaRealizada.emEdicao ? 'background-color:#EEE8AA;' : ''}width:60px;"> 
	              <f:facet name="header"> 
	  	      	    <h:outputText value="#{messages.LABEL_ACAO}"/> 
	      	      </f:facet>
	      	      <mec:commandLink title="#{messages.LABEL_EDITAR}" 
	      	      		action="#{manterSumarioAltaProcedimentosController.editarItemGridCirurgiasRealizadas}" 
	      	           	rendered="#{not itemCirurgiaRealizada.emEdicao and not itemCirurgiaRealizada.origemListaCombo}" 
	      	           	profile="edit"
	      	           	process="@this" 
	      	           	ajax="true" 
	      	           	render="panelCirurgiasRealizadas, tabelaCirurgiasRealizadas">
	                 	<f:setPropertyActionListener target="#{manterSumarioAltaProcedimentosController.itemCirurgiasSelecionado}" value="#{itemCirurgiaRealizada}" for="command"/>
	      	      </mec:commandLink>  
	              <mec:commandLink rendered="#{itemCirurgiaRealizada.emEdicao and itemCirurgiaRealizada.origemListaCombo}" 
	             		styleClass=" silk-blank silk-icon" 
	                    ajax="true"/>
			  	  <mec:commandLink title="#{messages.LABEL_EXCLUIR}" 
			  	  		action="#{manterSumarioAltaProcedimentosController.excluirItemGridCirurgiasRealizadas}" 
	  	                profile="delete"
	  	                process="@this"
	  	                ajax="true" 
	  	                render="panelCirurgiasRealizadas, tabelaCirurgiasRealizadas">
	                 	<f:setPropertyActionListener target="#{manterSumarioAltaProcedimentosController.itemCirurgiasSelecionado}" value="#{itemCirurgiaRealizada}" for="command"/>
	          	  </mec:commandLink>  
	            </p:column> 
	            <p:column style="#{itemCirurgiaRealizada.emEdicao ? 'background-color:#EEE8AA;' : ''}width:70px;">
	              <f:facet name="header"> 
	  	            <h:outputText value="#{messages.LABEL_DATA}"/> 
	      	      </f:facet> 
	              	<h:outputText value="#{itemCirurgiaRealizada.data}"> 
	              	<f:convertDateTime pattern="dd/MM/yyyy"/> 
	              </h:outputText> 
	            </p:column>  
	            <p:column width="auto" style="#{itemCirurgiaRealizada.emEdicao ? 'background-color:#EEE8AA' : ''}">
	              <f:facet name="header"> 
	  	            <h:outputText value="#{messages.LABEL_DESCRICAO}"/> 
	      	      </f:facet> 
	              <h:outputText value="#{itemCirurgiaRealizada.descricao}" style="text-transform:uppercase"/> 
	            </p:column> 
	          </mec:serverDataTable> 
	        </p:outputPanel> 
	       </p:tab> 
	      </p:accordionPanel>
	      <p:accordionPanel id="togglePanelProcedimentos" prependId="false">
	          <p:tab title="Procedimentos">  
	            <p:outputPanel id="panelProcedimentos" layout="block"> 
	              <p:outputPanel rendered="#{manterSumarioAltaProcedimentosController.mostrarPanelComboProcedimento}" layout="inline"> 
	                <aghu:linha> 
	                  <mec:field name="fdComboProcedimento" inputId="ComboProcedimento"> 
		                  <p:selectOneMenu id="procedimentoCombobox"
			                style="width: 130px;"
			                onkeydown="enterInSelectField(event, '#{stopEnter}');"
			                styleClass="ui-inputfield ui-inputtext ui-widget ui-state-default ui-corner-all"
			                disabled="#{manterSumarioAltaProcedimentosController.itemEdicaoProcedimentos.emEdicao or manterSumarioAltaProcedimentosController.itemEdicaoProcedimentos.origemListaCombo}"
			                value="#{manterSumarioAltaProcedimentosController.itemSelecionadoComboProcedimentos}">
			                 <f:converter converterId="baseEntityConverter" />
			                 <f:selectItem itemValue="" itemLabel="Selecione" noSelectionOption="true" />
			                 <f:selectItems var="item" itemLabel="#{item.descricaoFormatada}" value="#{manterSumarioAltaProcedimentosController.listaComboProcedimentos}" itemValue="#{item}"/>
							 <p:ajax event="change" listener="#{manterSumarioAltaProcedimentosController.adicionarItemProcedimento}" process="@this" update="@(#panelProcedimentos) @(#tabelaProcedimentos)" />
						</p:selectOneMenu>	                  
	                  </mec:field>
	                  <aghu:acao newLine="false">
	                    <mec:commandButton id="btOutroItemProcedimento" 
	                    		action="#{manterSumarioAltaProcedimentosController.acaoOutroItemProcedimento}" 
	                    		value="#{messages.LABEL_SELECIONE_OUTRO}" 
	                    		ajax="true" 
	                    		render="panelOutrosItensProcedimento" 
	                    		process="@this" 
	                    		styleClass="bt_cinza"/>
	                  </aghu:acao> 
	                </aghu:linha>
	              </p:outputPanel>  
	              <p:outputPanel id="panelOutrosItensProcedimento" layout="inline"> 
	                <p:outputPanel rendered="#{manterSumarioAltaProcedimentosController.mostrarPanelOutrosItensProcedimento}" layout="inline"> 
	                  <aghu:linha> 
	                    <mec:inputTextData label="#{messages.LABEL_DATA}" 
	                    		value="#{manterSumarioAltaProcedimentosController.dataProcedimento}"  
	                    		readonly="#{manterSumarioAltaProcedimentosController.itemEdicaoProcedimentos.origemListaCombo}" 
	                    		id="dataProcedimento" 
	                    		tipo="data"/>  
	                    <mec:suggestionBox label="#{messages.LABEL_PROCEDIMENTOS}" 
	                    		title="#{messages.TITLE_PROCEDIMENTOS_SUMARIO_ALTA}" 
	                    		suggestionAction="listarVMpmOtrProcedSum" 
	                    		size="50" 
	                    		maxlength="50" 
	                    		descricaoInput="id.codigo" 
	                    		descricaoLabel="descricao" 
	                    		width="400" 
	                    		readonly="#{manterSumarioAltaProcedimentosController.itemEdicaoProcedimentos.emEdicao or manterSumarioAltaProcedimentosController.itemEdicaoProcedimentos.origemListaCombo}" 
	                    		id="sbProcedimentos" 
	                    		controller="#{manterSumarioAltaProcedimentosController}" 
	                    		value="#{manterSumarioAltaProcedimentosController.vMpmOtrProcedSum}"
	                    		var="itemProced" itemValue="#{itemProced}"> 
	                      <p:column> 
	                        <f:facet name="header"> 
	                          <b>#{messages.LABEL_CODIGO}</b> 
	                        </f:facet> #{itemProced.id.codigo}
	                      </p:column>  
	                      <p:column> 
	                        <f:facet name="header"> 
	                          <b>#{messages.LABEL_DESCRICAO}</b> 
	                        </f:facet> #{itemProced.descricao}
	                      </p:column> 
	                    </mec:suggestionBox>
	                    <aghu:acao newLine="false">  
	                      <mec:commandButton id="btGravarProcedimento" 
	                      		rendered="#{not manterSumarioAltaProcedimentosController.itemEdicaoProcedimentos.emEdicao}" 
	                      		action="#{manterSumarioAltaProcedimentosController.gravarProcedimentos}" 
	                      		value="#{messages.LABEL_GRAVAR}" 
	                      		profile="ok"
	                      		process="@this @(#panelProcedimentos)" 
	                      		ajax="true" 
	                      		render="panelProcedimentos, tabelaProcedimentos">
	                      </mec:commandButton>  
	                      <mec:commandButton id="btAtualizarProcedimento" 
	                      		rendered="#{manterSumarioAltaProcedimentosController.itemEdicaoProcedimentos.emEdicao}" 
	                      		disabled="#{manterSumarioAltaProcedimentosController.itemEdicaoProcedimentos.origemListaCombo}" 
	                      		action="#{manterSumarioAltaProcedimentosController.atualizarItemEmEdicaoProcedimentos}" 
	                      		value="#{messages.LABEL_ALTERAR}" 
	                      		profile="ok"
	                      		process="@this @(#panelOutrosItensProcedimento)" 
	                      		ajax="true" 
	                      		render="panelProcedimentos, tabelaProcedimentos">
	                      </mec:commandButton>  
	                      <mec:commandButton id="btCancelarProcedimento" 
	                      		rendered="#{manterSumarioAltaProcedimentosController.itemEdicaoProcedimentos.emEdicao}" 
	                      		action="#{manterSumarioAltaProcedimentosController.cancelarItemEmEdicaoProcedimentos}" 
	                      		value="#{messages.LABEL_CANCELAR_EDICAO}" 
	                      		styleClass="bt_cancel_edit  bt_cinza" 
	                      		process="@this"
	                      		ajax="true" 
	                      		render="panelProcedimentos, tabelaProcedimentos">
	                      </mec:commandButton>
	                    </aghu:acao> 
	                  </aghu:linha>
	                </p:outputPanel> 
	              </p:outputPanel> 
	              <p:outputPanel> 
	                <mec:serverDataTable id="tabelaProcedimentos" 
	                		style="border-top: 0 none !important" 
	                  		rendered="true" 
	                  		list="#{manterSumarioAltaProcedimentosController.listaGridProcedimentos}"
	                  		scrollHeight="100"  
		           			scrollable="true"
		           			controller="manterSumarioAltaProcedimentosController">
	                  <c:set var="itemProcedimentos" value="#{item}"/>  
	                  <p:column style="#{itemProcedimentos.emEdicao ? 'background-color:#EEE8AA;' : ''}width:60px;">
	                    <f:facet name="header"> 
		  	      	      <h:outputText value="#{messages.LABEL_ACAO}"/> 
		      	        </f:facet> 
	                    <mec:commandLink title="#{messages.LABEL_EDITAR}" 
	                    		action="#{manterSumarioAltaProcedimentosController.editarItemGridProcedimentos}" 
	                      		rendered="false" 
	                      		profile="edit"
	                      		process="@this" 
	                      		ajax="true" 
	                      		render="panelProcedimentos, tabelaProcedimentos">
		                  <f:setPropertyActionListener target="#{manterSumarioAltaProcedimentosController.itemProcedimentosSelecionado}" value="#{itemProcedimentos}" for="command"/>
	                    </mec:commandLink>  
	                    <mec:commandLink rendered="false" 
	                  			styleClass=" silk-blank silk-icon" 
	                      		ajax="true"/>  
	                    <mec:commandLink title="#{messages.LABEL_EXCLUIR}" 
	                    		action="#{manterSumarioAltaProcedimentosController.excluirItemGridProcedimentos}" 
	                      		profile="delete"
	                      		process="@this" 
	                      		ajax="true" 
	                      		render="panelProcedimentos, tabelaProcedimentos">
		                  <f:setPropertyActionListener target="#{manterSumarioAltaProcedimentosController.itemProcedimentosSelecionado}" value="#{itemProcedimentos}" for="command"/>
	                    </mec:commandLink> 
	                  </p:column>  
	                  <p:column style="#{itemProcedimentos.emEdicao ? 'background-color:#EEE8AA;' : ''}width:70px;">
	                    <f:facet name="header"> 
		  	      	      <h:outputText value="#{messages.LABEL_DATA}"/> 
		      	        </f:facet>  
	                    <h:outputText value="#{itemProcedimentos.data}"> 
	                      <f:convertDateTime pattern="dd/MM/yyyy"/> 
	                    </h:outputText> 
	                  </p:column>  
	                  <p:column width="auto" style="#{itemProcedimentos.emEdicao ? 'background-color:#EEE8AA' : ''}">
	                    <f:facet name="header"> 
	  	  	      	      <h:outputText value="#{messages.LABEL_DESCRICAO}"/> 
		      	        </f:facet>   
	                    <h:outputText value="#{itemProcedimentos.descricao}" style="text-transform:uppercase"/> 
	                  </p:column> 
	                </mec:serverDataTable> 
	              </p:outputPanel>
	            </p:outputPanel> 
	          </p:tab>  
	      </p:accordionPanel>
	      <p:accordionPanel id="togglePanelOutrosProcedimentos" prependId="false">
	          <p:tab title="Outros Procedimentos">  
	            <p:outputPanel id="panelOutrosProcedimentos" layout="block"> 
	              <aghu:linha> 
	                <mec:inputTextData label="#{messages.LABEL_DATA}" 
	                		value="#{manterSumarioAltaProcedimentosController.dataOutroProcedimento}" 
	                	    id="dataOutroProcedimento" 
	                		tipo="data"/>  
	                <mec:inputText label="#{messages.LABEL_DESCRICAO}" 
	                		value="#{manterSumarioAltaProcedimentosController.descricaoOutroProcedimento}" 
	                		title="#{messages.LABEL_DESCRICAO_OUTROS_PROCEDIMENTOS_HELP}" 
	                		size="50" 
	                		maxlength="240" 
	                		id="descricaoOutroProcedimento"/>
	                <aghu:acao newLine="false">  
	                  <mec:commandButton id="btGravarOutroProcedimento" 
	                  		rendered="#{not manterSumarioAltaProcedimentosController.itemEdicaoOutrosProcedimentos.emEdicao}" 
	                    	action="#{manterSumarioAltaProcedimentosController.gravarItemEdicaoOutrosProcedimentos}" 
	                    	value="#{messages.LABEL_GRAVAR}" 
	                    	profile="ok"
	                    	process="@this @(#panelOutrosProcedimentos)" 
	                    	ajax="true" 
	                    	render="panelOutrosProcedimentos, tabelaOutrosProcedimentos">
	                  </mec:commandButton>  
	                  <mec:commandButton id="btAtualizarOutroProcedimento" 
	                    	rendered="#{manterSumarioAltaProcedimentosController.itemEdicaoOutrosProcedimentos.emEdicao}" 
	                    	action="#{manterSumarioAltaProcedimentosController.atualizarItemEmEdicaoOutrosProcedimentos}" 
	                    	value="#{messages.LABEL_ALTERAR}" 
	                    	profile="ok"
	                    	process="@this @(#panelOutrosProcedimentos)" 
	                    	ajax="true" 
	                    	render="panelOutrosProcedimentos, tabelaOutrosProcedimentos">
	                  </mec:commandButton>  
	                  <mec:commandButton id="btCancelarOutroProcedimento" 
	                  		rendered="#{manterSumarioAltaProcedimentosController.itemEdicaoOutrosProcedimentos.emEdicao}" 
	                  		action="#{manterSumarioAltaProcedimentosController.cancelarItemEmEdicaoOutrosProcedimentos}" 
	                  		value="#{messages.LABEL_CANCELAR_EDICAO}" 
	                  		styleClass="bt_cancel_edit  bt_cinza"
	                  		process="@this" 
	                  		ajax="true" 
	                  		render="panelOutrosProcedimentos, tabelaOutrosProcedimentos">
	                  </mec:commandButton>
	                </aghu:acao> 
	              </aghu:linha>
	            </p:outputPanel>  
	            <p:outputPanel> 
	              <mec:serverDataTable id="tabelaOutrosProcedimentos" 
	              		style="border-top: 0 none !important" 
	                  	rendered="true" 
	                  	list="#{manterSumarioAltaProcedimentosController.listaGridOutrosProcedimentos}"
	                  	scrollHeight="100"  
		           		scrollable="true"
		           		controller="manterSumarioAltaProcedimentosController">
	                <c:set var="itemOutrosProcedimentos" value="#{item}"/>  
	                <p:column style="#{itemOutrosProcedimentos.emEdicao ? 'background-color:#EEE8AA;' : ''}width:60px;">
	                  <f:facet name="header"> 
		  	      	    <h:outputText value="#{messages.LABEL_ACAO}"/> 
		      	      </f:facet>  
	                  <mec:commandLink title="#{messages.LABEL_EDITAR}" 
	                  		action="#{manterSumarioAltaProcedimentosController.editarItemGridOutrosProcedimentos}" 
	                  		rendered="#{not itemOutrosProcedimentos.emEdicao}" 
	                  		profile="edit"
	                  		process="@this" 
	                  		ajax="true" 
	                  		render="panelOutrosProcedimentos, tabelaOutrosProcedimentos">
		                <f:setPropertyActionListener target="#{manterSumarioAltaProcedimentosController.itemOutrosProcedimentosSelecionado}" value="#{itemOutrosProcedimentos}" for="command"/>
		              </mec:commandLink>  
	                  <mec:commandLink rendered="#{itemOutrosProcedimentos.emEdicao}" 
	                  		styleClass=" silk-blank silk-icon" 
	                  		ajax="true"/>  
	                  <mec:commandLink title="#{messages.LABEL_EXCLUIR}" 
	                  		action="#{manterSumarioAltaProcedimentosController.excluirItemGridOutrosProcedimentos}" 
	                  		profile="delete" 
	                  		ajax="true" 
	                  		process="@this"
	                  		render="panelOutrosProcedimentos, tabelaOutrosProcedimentos">
		                <f:setPropertyActionListener target="#{manterSumarioAltaProcedimentosController.itemOutrosProcedimentosSelecionado}" value="#{itemOutrosProcedimentos}" for="command"/>
	                  </mec:commandLink> 
	                </p:column>  
	                <p:column style="#{itemOutrosProcedimentos.emEdicao ? 'background-color:#EEE8AA;' : ''}width:70px;">
	                  <f:facet name="header"> 
		  	      	    <h:outputText value="#{messages.LABEL_DATA}"/> 
		      	      </f:facet>  
	                  <h:outputText value="#{itemOutrosProcedimentos.data}"> 
	                    <f:convertDateTime pattern="dd/MM/yyyy"/> 
	                  </h:outputText> 
	                </p:column>  
	                <p:column width="auto" style="#{itemOutrosProcedimentos.emEdicao ? 'background-color:#EEE8AA' : ''}">
	                  <f:facet name="header"> 
		  	      	    <h:outputText value="#{messages.LABEL_DESCRICAO}"/> 
		      	      </f:facet>   
	                  <h:outputText value="#{itemOutrosProcedimentos.descricao}" style="text-transform:uppercase"/> 
	                </p:column> 
	              </mec:serverDataTable> 
	            </p:outputPanel> 
	          </p:tab>  
	      </p:accordionPanel>
	      <p:accordionPanel id="togglePanelCOnsultorias" prependId="false">
	          <p:tab title="Consultorias">  
	            <p:outputPanel id="panelConsultorias" layout="block"> 
	              <p:outputPanel rendered="#{manterSumarioAltaProcedimentosController.mostrarPanelComboConsultoria}" layout="inline"> 
	                <aghu:linha> 
	                  <mec:selectOneMenu disabled="#{manterSumarioAltaProcedimentosController.itemEdicaoConsultorias.emEdicao or manterSumarioAltaProcedimentosController.itemEdicaoConsultorias.origemListaCombo}"	
		                  	itemLabel="descricaoFormatada" 
		                 	value="#{manterSumarioAltaProcedimentosController.itemSelecionadoComboConsultoria}" 
		                 	items="#{manterSumarioAltaProcedimentosController.listaComboConsultorias}"
		                 	id="comboConsultoria"
		                 	ajax="true"
		                 	process="@this"
		                 	render="tabelaConsultorias">
		                 	<p:ajax event="change" listener="#{manterSumarioAltaProcedimentosController.adicionarItemConsultorias}" process="@this" update="@(#panelConsultorias) @(#tabelaConsultorias)" />
		   	          </mec:selectOneMenu>  
	                  <aghu:acao newLine="false">
	                    <mec:commandButton id="btOutroItemConsultoria" 
	                    		action="#{manterSumarioAltaProcedimentosController.acaoOutroItemConsultoria}" 
	                    		value="#{messages.LABEL_SELECIONE_OUTRO}" 
	                    		ajax="true" 
	                    		render="panelOutrosItensConsultoria" 
	                    		process="@this" 
	                    		styleClass="bt_cinza"/>
	                  </aghu:acao> 
	                </aghu:linha> 
	              </p:outputPanel>  
	              <p:outputPanel id="panelOutrosItensConsultoria" layout="inline"> 
	                <p:outputPanel rendered="#{manterSumarioAltaProcedimentosController.mostrarPanelOutrosItensConsultoria or manterSumarioAltaProcedimentosController.itemEdicaoConsultorias.emEdicao}" layout="inline"> 
	                  <aghu:linha> 
	                    <mec:inputTextData label="#{messages.LABEL_DATA}" 
	                    		value="#{manterSumarioAltaProcedimentosController.dataConsultoria}" 
	                    		readonly="#{manterSumarioAltaProcedimentosController.itemEdicaoConsultorias.origemListaCombo}" 
	                    		id="dataConsultoria" 
	                    		tipo="data"/>  
	                    <mec:suggestionBox label="#{messages.LABEL_ESPECIALIDADES}" 
	                      		title="#{messages.TITLE_ESPECIALIDADES}" 
	                      		suggestionAction="obterEspecialidade" 
	                      		descricaoInput="sigla" 
	                      		descricaoLabel="nomeEspecialidade" 
	                      		maxlength="30" 
	                      		readonly="#{manterSumarioAltaProcedimentosController.itemEdicaoConsultorias.emEdicao or manterSumarioAltaProcedimentosController.itemEdicaoConsultorias.origemListaCombo}" 
	                      		id="sbConsultoriasEspecialidades" 
	                      		controller="#{manterSumarioAltaProcedimentosController}" 
	                      		value="#{manterSumarioAltaProcedimentosController.especialidade}"
	                      		ajax="true"
	                      		process="@this"
	                      		var="itemEspec" itemValue="#{itemEspec}"> 
	                      <p:column> 
	                        <f:facet name="header"> 
	                          <b>#{messages.LABEL_CODIGO}</b> 
	                        </f:facet> #{itemEspec.seq}
	                      </p:column>  
	                      <p:column> 
	                        <f:facet name="header"> 
	                          <b>#{messages.LABEL_DESCRICAO}</b> 
	                        </f:facet> #{itemEspec.nomeEspecialidade}
	                      </p:column>  
	                      <p:column> 
	                        <f:facet name="header"> 
	                          <b>#{messages.LABEL_SIGLA}</b> 
	                        </f:facet> #{itemEspec.sigla}
	                      </p:column> 
	                    </mec:suggestionBox>
	                    <aghu:acao newLine="false">  
	                      <mec:commandButton id="btGravarConsultoria" 
	                      		rendered="#{not manterSumarioAltaProcedimentosController.itemEdicaoConsultorias.emEdicao}" 
	                      		action="#{manterSumarioAltaProcedimentosController.gravarItemConsultorias}" 
	                      		value="#{messages.LABEL_GRAVAR}" 
	                      		profile="ok"
	                      		process="@this @(#panelOutrosItensConsultoria)" 
	                      		ajax="true" 
	                      		render="panelConsultorias, tabelaConsultorias">
	                      </mec:commandButton>  
	                      <mec:commandButton id="btAtualizarConsultoria" 
	                      		rendered="#{manterSumarioAltaProcedimentosController.itemEdicaoConsultorias.emEdicao}" 
	                      		disabled="#{manterSumarioAltaProcedimentosController.itemEdicaoConsultorias.origemListaCombo}" 
	                      		action="#{manterSumarioAltaProcedimentosController.atualizarItemEmEdicaoConsultorias}" 
	                      		value="#{messages.LABEL_ALTERAR}" 
	                      		profile="ok"
	                      		process="@this @(#panelOutrosItensConsultoria)" 
	                      		ajax="true" 
	                      		render="panelConsultorias, tabelaConsultorias">
	                      </mec:commandButton>  
	                      <mec:commandButton id="btCancelarConsultoria" 
	                      		rendered="#{manterSumarioAltaProcedimentosController.itemEdicaoConsultorias.emEdicao}" 
	                      		action="#{manterSumarioAltaProcedimentosController.cancelarItemEmEdicaoConsultorias}" 
	                      		value="#{messages.LABEL_CANCELAR_EDICAO}" 
	                      		styleClass="bt_cancel_edit  bt_cinza"
	                      		process="@this"
	                      		ajax="true" 
	                      		render="panelConsultorias, tabelaConsultorias">
	                      </mec:commandButton>
	                    </aghu:acao> 
	                  </aghu:linha>
	                </p:outputPanel> 
	              </p:outputPanel> 
	            </p:outputPanel>
	            <p:outputPanel>
	              <mec:serverDataTable id="tabelaConsultorias" 
	              		style="border-top: 0 none !important" 
	              		rendered="true" 
	              		list="#{manterSumarioAltaProcedimentosController.listaGridConsultorias}"
	              		scrollHeight="100"  
		           		scrollable="true"
		           		controller="manterSumarioAltaProcedimentosController">
	                <c:set var="itemConsultorias" value="#{item}"/>  
	                <p:column style="#{itemConsultorias.emEdicao ? 'background-color:#EEE8AA;' : ''}width:60px;">
	                  <f:facet name="header"> 
		  	      	    <h:outputText value="#{messages.LABEL_ACAO}"/> 
		      	      </f:facet>   
	                  <mec:commandLink title="#{messages.LABEL_EDITAR}" 
	                  		action="#{manterSumarioAltaProcedimentosController.editarItemGridConsultorias}" 
	                  		rendered="#{not itemConsultorias.emEdicao and not itemConsultorias.origemListaCombo}"
	                  		profile="edit" 
	                  		process="@this"
	                  		ajax="true" 
	                  		render="panelConsultorias, tabelaConsultorias">
		                <f:setPropertyActionListener target="#{manterSumarioAltaProcedimentosController.itemConsultoriasSelecionado}" value="#{itemConsultorias}" for="command"/>
	                  </mec:commandLink>  
	                  <mec:commandLink rendered="#{itemConsultorias.emEdicao and itemConsultorias.origemListaCombo}" 
	                  		styleClass=" silk-blank silk-icon" 
	                  		ajax="true"/>  
	                  <mec:commandLink title="#{messages.LABEL_EXCLUIR}" 
	                  		action="#{manterSumarioAltaProcedimentosController.excluirItemGridConsultorias}" 
	                  		profile="delete"
	                  		process="@this" 
	                  		ajax="true" 
	                  		render="panelConsultorias, tabelaConsultorias">
		                <f:setPropertyActionListener target="#{manterSumarioAltaProcedimentosController.itemConsultoriasSelecionado}" value="#{itemConsultorias}" for="command"/>
	                  </mec:commandLink> 
	                </p:column>  
	                <p:column style="#{itemConsultorias.emEdicao ? 'background-color:#EEE8AA;' : ''}width:70px;">
	                  <f:facet name="header"> 
		  	      	    <h:outputText value="#{messages.LABEL_DATA}"/>  
		      	      </f:facet> 
	                  <h:outputText value="#{itemConsultorias.data}"> 
	                    <f:convertDateTime pattern="dd/MM/yyyy"/> 
	                  </h:outputText> 
	                </p:column>  
	                <p:column width="auto" style="#{itemConsultorias.emEdicao ? 'background-color:#EEE8AA' : ''}">
	                  <f:facet name="header"> 
		  	      	    <h:outputText value="#{messages.LABEL_DESCRICAO}"/>  
		      	      </f:facet>  
	                  <h:outputText value="#{itemConsultorias.descricao}" style="text-transform:uppercase"/> 
	                </p:column> 
	              </mec:serverDataTable> 
	            </p:outputPanel> 
	          </p:tab>
	      </p:accordionPanel>
          <p:accordionPanel id="togglePanelPrincipaisFarmacos" prependId="false">
	          <p:tab title="Principais Fármacos">  
	            <p:outputPanel id="panelPrincipaisFarmacos" layout="block"> 
	              <table> 
	                <tr> 
	                  <td rowspan="1" colspan="1">
	                    <mec:serverDataTable id="tabelaPrincipaisFarmacosOrigem" 
	                    		list="#{manterSumarioAltaProcedimentosController.listaMdtos}"
	                    		width="100%" 
	                    		style="vertica-align: top !important;" 
	                    		scrollable="true"
	                    		selection="listaAfaMedicamentoPrescricaoVO"
								controller="#{manterSumarioAltaProcedimentosController}" >
	                    	<p:ajax event="rowSelect"
						  		listener="#{manterSumarioAltaProcedimentosController.setarMdtoSelecionadoOrigem()}"
						  		process="@this @(#btExcluirMdto) @(#btGravarMdto)"
						  		update="@(#panelPrincipaisFarmacos)" />
	                      <c:set var="_itemTodosFarm" value="#{item}"/>
	                      <p:column sortBy="#{_itemTodosFarm.upperDescricao}">
	                        <f:facet name="header"> 
		  	      	          <h:outputText value="#{messages.FARMACOS_UTILIZADOS_INTERNACAO}"/> 
		      	            </f:facet>
		      	            <h:outputText value="#{_itemTodosFarm.upperDescricao}"/>
	                      </p:column> 
	                    </mec:serverDataTable>
	                  </td>  
	                  <td rowspan="2" valign="middle" colspan="1">
	                    <aghu:acao newLine="false"> 
	                      <mec:commandButton id="btGravarMdto" 
	                      		value="#{messages.LABEL_GRAVAR}" 
	                      		style="margin: 10px; width: 100px" 
	                      		action="#{manterSumarioAltaProcedimentosController.moverMdtoParaListaDestino}"
	                      		disabled="#{manterSumarioAltaProcedimentosController.mdtoSelecionadoOrigem == null}"
	                      		styleClass="bt_verdeFixo bt_cinza"
	                      		process="@this" 
	                      		ajax="true" 
	                      		render="panelPrincipaisFarmacos">
	                      </mec:commandButton>
	                      <br clear="none"/>    
	                      <mec:commandButton id="btExcluirMdto" 
	                      		value="#{messages.LABEL_EXCLUIR}" 
	                      		style="margin: 0 10px; width: 100px" 
	                      		action="#{manterSumarioAltaProcedimentosController.moverMdtoParaListaOrigem}" 
	                      		styleClass="bt_vermelhoFixo bt_cinza"
	                      		disabled="#{manterSumarioAltaProcedimentosController.mdtoSelecionadoDestino == null}"
	                      		process="@this" 
	                      		ajax="true" 
	                      		render="panelPrincipaisFarmacos">
	                      </mec:commandButton>
	                    </aghu:acao> 
	                  </td>  
	                  <td rowspan="1" colspan="1"> 
	                    <mec:serverDataTable width="100%"
	                    		list="#{manterSumarioAltaProcedimentosController.listaMdtosSelecionados}"
	                    		style="v-align:top !important;" 
	                      		id="tabelaPrincipaisFarmacosDestino" 
	                      		rendered="true" 
	                      		selection="listaAfaMedicamentoPrescricaoVO"
	                      		controller="#{manterSumarioAltaProcedimentosController}"
	                      		scrollable="true">
	                      <p:ajax event="rowSelect"
						  		listener="#{manterSumarioAltaProcedimentosController.setarMdtoSelecionadoDestino()}"
						  		process="@this @(#btExcluirMdto) @(#btGravarMdto)"
						  		update="@(#panelPrincipaisFarmacos)" />                      
	                      <c:set var="_itemPrincipaisFarm" value="#{item}"/>  
	                      <p:column sortBy="#{_itemPrincipaisFarm.upperDescricao}">
	                        <f:facet name="header"> 
		  	      	          <h:outputText value="#{messages.PRINCIPAIS_FARMACOS}"/> 
		      	            </f:facet>    
		      	            <h:outputText value="#{_itemPrincipaisFarm.upperDescricao}"/>
	                      </p:column> 
	                    </mec:serverDataTable>
	                  </td> 
	                </tr> 
	              </table> 
	            </p:outputPanel>
	          </p:tab>
	      </p:accordionPanel>
	      <p:accordionPanel id="togglePanelInformacoesComplementares" prependId="false"> 
	          <p:tab title="Informações Complementares">  
	            <p:outputPanel id="panelInformacoesComplementares" layout="block"> 
	              <aghu:linha>
	                <mec:inputTextArea cols="110" 
	                		rows="4" 
	                		maxlength="500" 
	                		label="#{messages.LABEL_COMPLEMENTO}" 
	                		value="#{manterSumarioAltaProcedimentosController.complementoInformacoesComplementares}" 
	                		title="Digite a descrição do complemento de Informações Complementares" 
	                		id="complemento" 
	                		styleClass="maxlength_(500)"/> 
	              </aghu:linha>  
	              <aghu:linha>
	                <mec:selectOneRadio id="radioInformacoesComplementares" 
	                		label="OUTROS FÁRMACOS" 
	                		enum="DominioOutrosFarmacos" 
	                		value="#{manterSumarioAltaProcedimentosController.informacaoComplementarVO.radioInformacoesComplementares}" 
	                		readonly="#{manterSumarioAltaProcedimentosController.informacaoComplementarVO.emEdicao}"> 
	                    <p:ajax event="change" update="@(#panelCampos)" process="@this" listener="#{manterSumarioAltaProcedimentosController.valueChangeRadioInformacoesComplementares}"/> 
	                </mec:selectOneRadio>  
	                <p:outputPanel id="panelCampos" layout="inline"> 
	                  <mec:suggestionBox label="#{messages.LABEL_MEDICAMENTOS}" 
	                  		title="#{messages.TITLE_MEDICAMENTOS}" 
	                    	suggestionAction="obtemListaDescrMdtoAtivos" 
	                    	descricaoInput="id.matCodigo" 
	                    	descricaoLabel="medicamento.descricaoEditada" 
	                    	rendered="#{manterSumarioAltaProcedimentosController.informacaoComplementarVO.ehListaDescrMdtoAtivos == true}" 
	                    	width="600" 
	                    	maxlength="30" 
	                    	id="sbListaDescrMdtoAtivos" 
	                    	controller="#{manterSumarioAltaProcedimentosController}" 
	                    	value="#{manterSumarioAltaProcedimentosController.informacaoComplementarVO.vAfaDescrMdto}"
	                    	var="itemMedic" itemValue="#{itemMedic}"> 
	                      <p:column> 
	                        <f:facet name="header"> 
	                          <b>#{messages.LABEL_DESCRICAO}</b> 
	                        </f:facet> #{itemMedic.id.descricaoMat}
	                      </p:column>  
	                      <p:column> 
	                        <f:facet name="header"> 
	                          <b>#{messages.LABEL_CONCENTRACAO}</b> 
	                        </f:facet> #{itemMedic.concentracaoFormatada}
	                      </p:column>  
	                      <p:column> 
	                        <f:facet name="header"> 
	                          <b>#{messages.LABEL_UNID}</b> 
	                        </f:facet> #{itemMedic.unidadeMedidaMedicas.descricao}
	                      </p:column>  
	                      <p:column> 
	                        <f:facet name="header"> 
	                          <b>#{messages.LABEL_APRES}</b> 
	                        </f:facet> #{itemMedic.tprSigla}
	                      </p:column>  
	                      <p:column> 
	                        <f:facet name="header"> 
	                          <b>#{messages.LABEL_IND_PADR}</b> 
	                        </f:facet> #{itemMedic.id.indPadronizacao ? 'S' : 'N'}
	                      </p:column> 
	                    </mec:suggestionBox>  
	                    <mec:inputText maxlength="120" 
	                    		size="66" 
	                    		value="#{manterSumarioAltaProcedimentosController.informacaoComplementarVO.descricaoMedicamento}" 
	                    		label="#{messages.DESC_MEDICAMENTO}" 
	                    		rendered="#{manterSumarioAltaProcedimentosController.informacaoComplementarVO.ehDescricaoMedicamento == true}" 
	                    		title="Digite a descrição do medicamento" 
	                    		id="txtDescricaoMedicamento"/> 
	                </p:outputPanel>
	                <aghu:acao newLine="false">  
	                  <mec:commandButton value="#{messages.LABEL_GRAVAR}" 
	                    	id="btAdicionarInfoCompl" 
	                    	style="display: block;" 
	                    	action="#{manterSumarioAltaProcedimentosController.adicionarInformacaoComplementar}" 
	                    	rendered="#{not manterSumarioAltaProcedimentosController.informacaoComplementarVO.emEdicao}" 
	                    	profile="ok"
	                    	process="@this @(#panelInformacoesComplementares)" 
	                    	ajax="true" 
	                    	render="panelListaInformacoesComplementares, panelInformacoesComplementares, tblistaInformacaoComplementar, formInformacoesComplementares">
	                  </mec:commandButton>  
	                  <mec:commandButton value="#{messages.LABEL_ALTERAR}" 
	                    	id="btAlterarInfoCompl" 
	                    	action="#{manterSumarioAltaProcedimentosController.alterarInformacaoComplementar}" 
	                    	rendered="#{manterSumarioAltaProcedimentosController.informacaoComplementarVO.emEdicao}" 
	                    	profile="ok"
	                    	process="@this @(#panelInformacoesComplementares)"
	                    	ajax="true" 
	                    	render="panelListaInformacoesComplementares, panelInformacoesComplementares, tblistaInformacaoComplementar, formInformacoesComplementares">
	                  </mec:commandButton>  
	                  <mec:commandButton value="#{messages.LABEL_CANCELAR_EDICAO}" 
	                  		id="btCancelarInfoCompl" 
	                    	action="#{manterSumarioAltaProcedimentosController.cancelarAlteracaoInformacaoComplementar}" 
	                    	rendered="#{manterSumarioAltaProcedimentosController.informacaoComplementarVO.emEdicao}" 
	                    	styleClass="bt_cancel_edit  bt_cinza"
	                    	process="@this" 
	                    	ajax="true"
	                    	render="panelInformacoesComplementares, tblistaInformacaoComplementar, formInformacoesComplementares">
	                  </mec:commandButton>
	                </aghu:acao> 
	              </aghu:linha>
	            </p:outputPanel> 
	            <p:outputPanel id="panelListaInformacoesComplementares" layout="inline"> 
	              <p:outputPanel rendered="#{not empty manterSumarioAltaProcedimentosController.listaInformacaoComplementar}">
	                <mec:serverDataTable id="tblistaInformacaoComplementar" 
	                  		style="border-top: 0 none !important" 
	                      	rendered="#{not empty manterSumarioAltaProcedimentosController.listaInformacaoComplementar}" 
	                      	list="#{manterSumarioAltaProcedimentosController.listaInformacaoComplementar}" 
	                      	scrollHeight="100"  
		           	  		scrollable="true"
		           	  		controller="manterSumarioAltaProcedimentosController">
	                  <c:set var="infoComplementar" value="#{item}"/>  
	                  <p:column style="#{(infoComplementar.idAltaPrincFarmaco.seqp == manterSumarioAltaProcedimentosController.informacaoComplementarVO.idAltaPrincFarmaco.seqp) ? 'background-color:#EEE8AA;' : ''}width:60px;">
	                    <f:facet name="header"> 
		  	              <h:outputText value="#{messages.LABEL_ACAO}"/> 
		      	        </f:facet> 
	                    <mec:commandLink title="#{messages.LABEL_EDITAR}" 
	                    		action="#{manterSumarioAltaProcedimentosController.editarInformacaoComplementar}" 
	                    		rendered="#{(infoComplementar.idAltaPrincFarmaco.seqp != manterSumarioAltaProcedimentosController.informacaoComplementarVO.idAltaPrincFarmaco.seqp)}" 
	                    		profile="edit"
	                    		process="@this" 
	                    		ajax="true" 
	                    		render="panelListaInformacoesComplementares, panelInformacoesComplementares, tblistaInformacaoComplementar">
		                  <f:setPropertyActionListener target="#{manterSumarioAltaProcedimentosController.informacaoComplementarVO}" value="#{infoComplementar}" for="command"/>
	                    </mec:commandLink>  
	                    <mec:commandLink rendered="#{(infoComplementar.idAltaPrincFarmaco.seqp == manterSumarioAltaProcedimentosController.informacaoComplementarVO.idAltaPrincFarmaco.seqp)}" 
	                    		styleClass=" silk-blank silk-icon" 
	                    		ajax="true"/>  
	                    <mec:commandLink immediate="true" 
	                    		title="#{messages.LABEL_EXCLUIR}" 
	                    		action="#{manterSumarioAltaProcedimentosController.excluirInformacaoComplementar}" 
	                    		profile="delete" 
	                    		ajax="true" 
	                    		render="panelListaInformacoesComplementares, panelInformacoesComplementares, tblistaInformacaoComplementar">
		                  <f:setPropertyActionListener target="#{manterSumarioAltaProcedimentosController.informacaoComplementarVO}" value="#{infoComplementar}" for="command"/>
	                    </mec:commandLink> 
	                  </p:column>  
	                  <p:column width="auto" style="#{(infoComplementar.idAltaPrincFarmaco.seqp == manterSumarioAltaProcedimentosController.informacaoComplementarVO.idAltaPrincFarmaco.seqp) ? 'background-color:#EEE8AA' : ''}">
	                    <f:facet name="header"> 
		  	             <h:outputText value="#{messages.LABEL_DESCRICAO_INFORMACAO_COMPLEMENTAR}"/> 
		      	        </f:facet> 
	                    <h:outputText value="#{infoComplementar.descricaoMedicamento}"/> 
	                  </p:column> 
	                </mec:serverDataTable> 
	              </p:outputPanel>  
	            </p:outputPanel>
	         </p:tab> 
        </p:accordionPanel> 
      </aghu:panelGeral>
    </h:form>
  </ui:composition> 
</html>