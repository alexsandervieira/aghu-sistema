<?xml version="1.0" encoding="UTF-8"?>

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:fn="http://xmlns.jcp.org/jsp/jstl/functions"
	xmlns:mec="http://xmlns.jcp.org/jsf/composite/components"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pe="http://primefaces.org/ui/extensions"
	xmlns:aghu="http://xmlns.jcp.org/jsf/component"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
	xmlns:mf="http://www.mec.gov.br/taglib">
<ui:composition template="/WEB-INF/templates/form_template.xhtml">
	<ui:define name="head">
	<script type="text/javascript" >
			    function open_modal_aghweb(url, atdSeq, token, banco, formFmx) {
			        var otherParams = 'aghw_token=' + token + '+p_banco=' + banco + '+p_atd_seq=' + atdSeq;
			        if (atdSeq != null) {
			            abrirJanelaModal(url,{
			            parameters: {
			            config: 'aghweb',
			            form: formFmx,
			            otherparams: otherParams
			            },
			            onClose: function() {
			
			                     }
			            });
			        }
			    }

	
				function evolucao(url, banco, atdSeq, token) {
					var otherParams = 'aghw_token=' + token + '+p_banco=' + banco + '+p_atd_seq=' + atdSeq;
					if (atdSeq != null) {
						abrirJanelaModal(url,{
								parameters: {
									config: 'aghweb',
									form: 'mamf_atu_internacao.fmx',
									otherparams: otherParams
								},
								onClose: function() {
									funcaoRecarregarListaPosAGHWeb();
								}
							});
					}
				}
			
			
				function solicitacao(url, banco, atdSeq, token) {
					var otherParams = 'aghw_token=' + token + '+p_banco=' + banco + '+p_atd_seq=' + atdSeq;
					if (atdSeq != null) {
						abrirJanelaModal(url,{
								parameters: {
									config: 'aghweb',
									form: 'aelf_solicitar_exame.fmx',
									otherparams: otherParams
								},
								onClose: function() {
									
								}
							});
					}
				}


				function prescricao(url, banco, atdSeq, token) {
					var otherParams = 'aghw_token=' + token + '+p_banco=' + banco + '+p_atd_seq=' + atdSeq;
					if (atdSeq != null) {
						abrirJanelaModal(url,{
								parameters: {
									config: 'aghweb',
									form: 'mpmf_cons_prcr_enf.fmx',
									otherparams: otherParams
								},
								onClose: function() {
									
								}
							});
					}
				}

				function diagenfativo(url, banco, atdSeq, token) {
					var otherParams = 'aghw_token=' + token + '+p_banco=' + banco + '+p_atd_seq=' + atdSeq + '+p_rel=eper_difer_diag_pac' + '+p_tit=Diagnostico Enf. Ativo' ;
					if (atdSeq != null) {
						abrirJanelaModal(url,{
								parameters: {
									config: 'aghweb',
									form: 'qms_vis_imp.fmx',
									otherparams: otherParams
								},
								onClose: function() {
									
								}
							});
					}
				}

				function diagenfpaciente(url, banco, atdSeq, token) {
					var otherParams = 'aghw_token=' + token + '+p_banco=' + banco + '+p_atd_seq=' + atdSeq + '+p_rel=eper_rel_diag_pac' + '+p_tit=Diagnostico Enf. Paciente' ;
					if (atdSeq != null) {
						abrirJanelaModal(url,{
								parameters: {
									config: 'aghweb',
									form: 'qms_vis_imp.fmx',
									otherparams: otherParams
								},
								onClose: function() {
									
								}
							});
					}
				}

				function ulcerasquedas(url, banco, atdSeq, token) {
					var otherParams = 'aghw_token=' + token + '+p_banco=' + banco + '+p_atd_seq=' + atdSeq;
					if (atdSeq != null) {
						abrirJanelaModal(url,{
								parameters: {
									config: 'aghweb',
									form: 'epef_notificacoes.fmx',
									otherparams: otherParams
								},
								onClose: function() {
									
								}
							});
					}
				}

				function controleinfeccao(url, banco, atdSeq, token) {
					var otherParams = 'aghw_token=' + token + '+p_banco=' + banco + '+p_atd_seq=' + atdSeq;
					if (atdSeq != null) {
						abrirJanelaModal(url,{
								parameters: {
									config: 'aghweb',
									form: 'mcif_atu_med_prvt_a.fmx',
									otherparams: otherParams
								},
								onClose: function() {
									
								}
							});
					}
				}

				function consultoriaenf(url, banco, atdSeq, token, solicEnf) {
					var otherParams = 'aghw_token=' + token + '+p_banco=' + banco + '+p_atd_seq=' + atdSeq;

				//Incidente #51554
				/* 	if (atdSeq != null &amp;&amp; solicEnf == 'false') {

						abrirJanelaModal(url,{
								parameters: {
									config: 'aghweb',
									form: 'epef_sol_consult.fmx',
									otherparams: otherParams
								},
								onClose: function() {
									
								}
							});
					}else{ 
						if (atdSeq != null &amp;&amp; solicEnf == 'true') {
			    */				
							abrirJanelaModal(url,{
									parameters: {
										config: 'aghweb',
										form: 'epef_atcon_ret_cnst.fmx',
										otherparams: otherParams
									},
									onClose: function() {
										
									}
								});
				/*		}
					 } 
			    */
				}

				function cadernopac(url, banco, token, matricula, vinculo) {

					var otherParams = 'aghw_token=' + token + '+p_banco=' + banco + '+p_ser_matricula=' + matricula + '+p_ser_vin_codigo=' + vinculo + '+p_rel=eper_caderno_pac' + '+p_tit=Caderno do Paciente' ;

					if(matricula != null &amp;&amp; vinculo != null){
						abrirJanelaModal(url,{
									parameters: {
										config: 'aghweb',
										form: 'qms_vis_imp.fmx',
										otherparams: otherParams
									},
									onClose: function() {
										
									}
								});
					}
				}

				function consultaPresc(url, banco, atdSeq, token) {
	                var otherParams = 'aghw_token=' + token + '+p_banco=' + banco + '+p_atd_seq=' + atdSeq;
	                if (atdSeq != null) {
	                    abrirJanelaModal(url,{
	                            parameters: {
	                                config: 'aghweb',
	                                form: 'mpmf_cons_prcr_enf.fmx',
	                                otherparams: otherParams
	                            },
	                            onClose: function() {

								}
	                        });
	                }
	            }
			
			</script>
		<title>Lista de pacientes enfermagem</title>
	</ui:define>
	
	<ui:define name="metadata">
		<f:metadata>
			<f:viewAction action="#{listaPacientesEnfermagemController.iniciar}" />
		</f:metadata>
	</ui:define>
	<ui:define name="body">
		<mec:pageConfig controller="#{listaPacientesEnfermagemController}" />
		
		<h:form prependId="false" id="formListaPacientes">
		
			<p:remoteCommand action="#{listaPacientesEnfermagemController.pesquisar()}" name="funcaoRecarregarListaPosAGHWeb" update="listaPacientes"/>
		
			<aghu:panelGeral
				legend="#{messages.LEGENDA_LISTA_PACIENTES_ENFERMAGEM}">
				<aghu:column type="table">

					<mec:serverDataTable id="listaPacientes"
						list="#{listaPacientesEnfermagemController.lista}"
						scrollHeight="520" scrollable="true"
						selection="pacienteEnfermagemVOSelecionado"
						controller="#{listaPacientesEnfermagemController}">

						<c:set var="_pacienteEnfermagemVO" value="#{item}" />

						<p:ajax event="rowSelect"
							listener="#{listaPacientesEnfermagemController.selecionarPacienteEnfermagem}"
							update="@(#tabelaAcao)" 
							onstart="PF('loadDialogWG').show();" 
							oncomplete="PF('loadDialogWG').hide();" />

						<ui:param name="background"
							value="#{'background-color: '.concat(_pacienteEnfermagemVO.colorLine)}" />
						<ui:param name="backgroundNome"
							value="#{'background-color: '.concat(_pacienteEnfermagemVO.colorNome)}" />

						<p:column style="#{background}; width:5%;"
							sortBy="#{_pacienteEnfermagemVO.local}">
							<f:facet name="header">
								<h:outputText value="#{messages.LABEL_LOCAL}" />
							</f:facet>
							<h:outputText value="#{_pacienteEnfermagemVO.local}" />
						</p:column>
						<p:column style="#{backgroundNome} ; width:30%;"
							sortBy="#{_pacienteEnfermagemVO.nome}">
							<f:facet name="header">
								<h:outputText value="#{messages.LABEL_NOME}" />
							</f:facet>
							<h:outputText value="#{_pacienteEnfermagemVO.nome}" />
						</p:column>
						<p:column style="text-align:center; #{background}; width:5%;"
							sortBy="#{_pacienteEnfermagemVO.idade}">
							<f:facet name="header">
								<h:outputText value="#{messages.LABEL_IDADE_LISTA}" />
							</f:facet>
							<h:outputText value="#{_pacienteEnfermagemVO.idade}" />
						</p:column>
						<p:column style="text-align:center; #{background}; width:9%;"
							sortBy="#{_pacienteEnfermagemVO.prontuario}">
							<f:facet name="header">
								<h:outputText value="#{messages.LABEL_PRONTUARIO}" />
							</f:facet>
							<h:outputText value="#{_pacienteEnfermagemVO.prontuario}" />
							<mec:commandLink id="LinkProntuarioLista"
									title="#{messages.TITLE_ABRIR_PRONTUARIO_ONLINE}"
									style="float:right;"
		                            rendered="#{not empty _pacienteEnfermagemVO.prontuario and mf:hasPermission(securityController, '/paciente/prontuarioonline/arvorePOL.xhtml,render')}"
			                        onclick="parent.addPOLProntuario(#{_pacienteEnfermagemVO.prontuario})"
				                    styleClass="silk-icon silk-pol16 silk-icon prontuario_#{_pacienteEnfermagemVO.prontuario}"
		                            ajax="true"/>
		                  	
						</p:column>
						<p:column style="#{background}; width:10%;"
							sortBy="#{_pacienteEnfermagemVO.dataAtendimento}">
							<f:facet name="header">
								<h:outputText value="#{messages.LABEL_DATA_ATENDIMENTO_LISTA}" />
							</f:facet>
							<h:outputText value="#{_pacienteEnfermagemVO.dataAtendimento}">
								<f:convertDateTime pattern="dd/MM/yy HH:mm" />
							</h:outputText>
						</p:column>
						<p:column style="text-align:center; #{background}; width:2%;"
							sortBy="#{_pacienteEnfermagemVO.ordemIconePrescricao}">

							<mec:commandLink
								action="#{listaPacientesEnfermagemController.realizarValidacaoChamadaPrescricao}"
								rendered="#{_pacienteEnfermagemVO.statusPrescEnfPaciente != null and _pacienteEnfermagemVO.desabilitaBotaoPrescrever == false}"
								styleClass="silk-icon #{messages['ICONE_'.concat(_pacienteEnfermagemVO.statusPrescEnfPaciente.name())]}"
								ajax="true" title="#{messages['TITLE_'.concat(_pacienteEnfermagemVO.statusPrescEnfPaciente.name())]}"
								disabled="#{mf:hasPermission(securityController, 'internacao,somenteLeitura')}" >

								<f:setPropertyActionListener
									target="#{listaPacientesEnfermagemController.atdSeq}"
									value="#{_pacienteEnfermagemVO.atdSeq}" for="command" />
								<f:setPropertyActionListener
									target="#{elaboracaoPrescricaoEnfermagemController.atdSeq}"
									value="#{_pacienteEnfermagemVO.atdSeq}" for="command" />
								<f:setPropertyActionListener
									target="#{elaboracaoPrescricaoEnfermagemController.voltarPara}"
									value="listaPacientesEnfermagem" for="command" />

							</mec:commandLink>
						</p:column>
						<p:column style="text-align:center; #{background}; width:2%;"
							sortBy="#{_pacienteEnfermagemVO.ordemIconeProjPesquisa}">

							<h:outputFormat value=""
								styleClass="silk-icon silk-paciente-proj-pesquisa"
								rendered="#{_pacienteEnfermagemVO.indPartProjPesquisa == true}" 
								title="#{messages.TITLE_PRESCRICAO_ENFERMAGEM_PACIENTE_PROJ_PESQUISA}"/>
						</p:column>
						<p:column style="text-align:center; #{background}; width:2%;"
							sortBy="#{_pacienteEnfermagemVO.ordemIconeSumario}">

							<h:outputFormat value="" styleClass="silk-icon silk-door-in"
								rendered="#{_pacienteEnfermagemVO.indAltaSumario == 'S'}" 
								title="#{messages.TITLE_PRESCRICAO_ENFERMAGEM_PACIENTE_COM_ALTA}"/>
						</p:column>
						<p:column style="text-align:center; #{background}; width:2%;"
							sortBy="#{_pacienteEnfermagemVO.ordemIconeSolicConsultoria}">

							<h:outputFormat value=""
								styleClass="silk-icon silk-consultoria-solicitada"
								rendered="#{_pacienteEnfermagemVO.indSolicConsultoria == true}"
								title="#{messages.TITLE_PRESCRICAO_ENFERMAGEM_CONSULTORIA_SOLICITADA}" />
							<h:outputFormat value=""
								styleClass="silk-icon silk-consultoria-solicitada-resposta-nao-vista"
								rendered="#{_pacienteEnfermagemVO.indSolicConsultoriaResp == true}"
								title="#{messages.TITLE_PRESCRICAO_ENFERMAGEM_CONSULTORIA_RESPOSTA}" />
						</p:column>
						<p:column width="2%" style="text-align:center; #{background}"
							sortBy="#{_pacienteEnfermagemVO.ordemIconeEvolucao}">

							<h:outputFormat value=""
								styleClass="silk-icon silk-paciente-prof-conectado"
								rendered="#{_pacienteEnfermagemVO.indEvolucao == true}"
								title="#{messages.TITLE_PRESCRICAO_ENFERMAGEM_EVOLUCAO_CATEG}"/>
						</p:column>
						<p:column width="2%" style="text-align:center; #{background}"
							sortBy="#{_pacienteEnfermagemVO.sinalizadorUlceraPressao}">

							<h:graphicImage id="image"
								styleClass="silk-icon #{listaPacientesEnfermagemController.getBundle().getString('ICONE_PRESCRICAO_ENFERMAGEM_'.concat(_pacienteEnfermagemVO.sinalizadorUlceraPressao.name()))}"
								rendered="#{_pacienteEnfermagemVO.sinalizadorUlceraPressao != null}"
								title="#{listaPacientesEnfermagemController.getBundle().getString('LABEL_PRESCRICAO_ENFERMAGEM_TOOLTIP_'.concat(_pacienteEnfermagemVO.sinalizadorUlceraPressao.name()))}" />
						</p:column>
					</mec:serverDataTable>
				</aghu:column>
				<aghu:column type="button">
					<p:outputPanel id="tabelaAcao" layout="inline" style="width: 170px;">
						<mec:commandButton id="bt_prescrever"
							value="#{messages.LABEL_PRESCREVER}"
							rendered="#{mf:hasPermission(securityController,'elaborarPrescricaoEnfermagem,criar')}"
							action="#{listaPacientesEnfermagemController.realizarValidacaoChamadaPrescricao}"
							disabled="#{listaPacientesEnfermagemController.desabilitaBotaoPrescrever or (mf:hasPermission(securityController, 'paciente,somenteLeitura'))}"
							styleClass="bt_cinza">
							<f:setPropertyActionListener
								target="#{elaboracaoPrescricaoEnfermagemController.atdSeq}"
								value="#{listaPacientesEnfermagemController.atdSeq}"
								for="command" />
							<f:setPropertyActionListener
								target="#{elaboracaoPrescricaoEnfermagemController.voltarPara}"
								value="listaPacientesEnfermagem" for="command" />
						</mec:commandButton>
		               <mec:commandButton id="bt_anamnese_evolucao" value="#{messages.LABEL_ANAMNESE_EVOLUCAO}"
		              	action="#{listaPacientesEnfermagemController.redirecionarListarAnamneseEvolucoes}"
		              	disabled="#{!listaPacientesEnfermagemController.enableButtonAnamneseEvolucao}"
		              	rendered="#{mf:hasPermission(securityController, 'visualizarAnamneseEvolucao,visualizar') and false}">
		                 <f:setPropertyActionListener target="#{listarAnamneseEvolucaoController.atdSeq}" value="#{listaPacientesEnfermagemController.atdSeq}" for="command"/>  
		       			 <f:setPropertyActionListener target="#{listarAnamneseEvolucaoController.paginaChamadora}" value="prescricaoenfermagem-listaPacientesEnfermagem" for="command"/>
		              </mec:commandButton>
						<mec:commandButton id="bt_controles"
							value="#{messages.LABEL_CONTROLES}"
							action="#{listaPacientesEnfermagemController.vaiParaRegistroControle}"
							disabled="#{empty listaPacientesEnfermagemController.prontuario or not mf:hasPermission(securityController,'evolucaoPacientePrescricaoEnfermagem,manter')}"
							styleClass="bt_cinza">
							<f:setPropertyActionListener
								target="#{registrosPacienteController.atdSeq}"
								value="#{listaPacientesEnfermagemController.atdSeq}"
								for="command" />
							<f:setPropertyActionListener
								target="#{registrosPacienteController.codigoPaciente}"
								value="#{listaPacientesEnfermagemController.pacCodigo}"
								for="command" />
							<f:setPropertyActionListener
								target="#{registrosPacienteController.voltarPara}"
								value="#{listaPacientesEnfermagemController.listaPacientesEnfermagem}"
								for="command" />
						</mec:commandButton>
						<mec:commandButton id="bt_solicitar_exames"
							value="#{messages.LABEL_SOLICITAR_EXAMES}"
							rendered="#{listaPacientesEnfermagemController.moduloExamesAtivo == true}"
							disabled="#{listaPacientesEnfermagemController.desabilitaBotaoSolicitarExames == true or not mf:hasPermission(securityController,'solicitacaoExames,solicitar')}"
							action="#{listaPacientesEnfermagemController.solicitarExames}"
							styleClass="bt_cinza">
							<f:setPropertyActionListener
								target="#{solicitacaoExameController.atendimentoSeq}"
								value="#{listaPacientesEnfermagemController.atdSeq}"
								for="command" />
							<f:setPropertyActionListener
								target="#{solicitacaoExameController.paginaChamadora}"
								value="prescricaoenfermagem-listaPacientesEnfermagem" for="command" />
						</mec:commandButton>


						<mec:commandButton id="bt_solicitar_exames_hcpa_aghweb"
							value="#{messages.LABEL_SOLICITAR_EXAMES_AGHWEB}"
							rendered="#{listaPacientesEnfermagemController.habilitarContgExamesAGHWeb()}"
							disabled="#{listaPacientesEnfermagemController.desabilitaBotaoSolicitarExames or not mf:hasPermission(securityController,'solicitacaoExames,solicitar')}"
							onclick="solicitacao('#{listaPacientesEnfermagemController.urlBaseWebForms}', '#{listaPacientesEnfermagemController.bancoAghWeb}','#{listaPacientesEnfermagemController.atdSeq}', '#{listaPacientesEnfermagemController.obterTokenUsuarioLogado()}'); return false;"
							styleClass="bt_cinza" />


						<mec:commandButton id="bt_diag_enf_paciente_ativo"
							value="#{messages.LABEL_DIAG_ENF_ATIVO}"
							disabled="#{listaPacientesEnfermagemController.desabilitaBotaoDiagEnfAtivo == true or listaPacientesEnfermagemController.integracaoAGHUAGHWEB == false or not mf:hasPermission(securityController,'diagnosticoEnfAtivo,imprimir')}"
							onclick="diagenfativo('#{listaPacientesEnfermagemController.urlBaseWebForms}', '#{listaPacientesEnfermagemController.bancoAghWeb}','#{listaPacientesEnfermagemController.atdSeq}', '#{listaPacientesEnfermagemController.obterTokenUsuarioLogado()}'); return false;"
							styleClass="bt_cinza" 
							style="display:none"/>

						<mec:commandButton id="bt_diag_enf_paciente"
							value="#{messages.LABEL_DIAG_ENF_PACIENTE}"
							disabled="#{listaPacientesEnfermagemController.desabilitaBotaoDiagEnfPaciente == true or listaPacientesEnfermagemController.integracaoAGHUAGHWEB == false or not mf:hasPermission(securityController,'diagnosticoEnfPaciente,imprimir')}"
							onclick="diagenfpaciente('#{listaPacientesEnfermagemController.urlBaseWebForms}', '#{listaPacientesEnfermagemController.bancoAghWeb}','#{listaPacientesEnfermagemController.atdSeq}', '#{listaPacientesEnfermagemController.obterTokenUsuarioLogado()}'); return false;"
							styleClass="bt_cinza" 
							style="display:none"/>

						<mec:commandButton id="bt_contracheque"
							value="#{messages.LABEL_CONTRACHEQUE}"
							action="#{listaPacientesEnfermagemController.consultarPrescricaoMedica}"
							disabled="#{empty listaPacientesEnfermagemController.prontuario or not mf:hasPermission(securityController,'imprimirContraCheque,imprimir')}"	
							styleClass="bt_cinza"
							style="display:none">
							
							<f:setPropertyActionListener
								target="#{selecionarPrescricaoConsultarController.prontuario}"
								value="#{listaPacientesEnfermagemController.prontuario}"
								for="command" />
								
							<f:setPropertyActionListener
								target="#{selecionarPrescricaoConsultarController.voltarPara}"
								value="#{listaPacientesEnfermagemController.listaPacientesEnfermagem}" for="command" />
								
						</mec:commandButton>
						
						<mec:commandButton id="bt_cons_presc_enfermagem"
							value="#{messages.LABEL_CONS_PRESC_ENFERMAGEM}"
							disabled="#{empty listaPacientesEnfermagemController.prontuario}"			
							action="#{listaPacientesEnfermagemController.consultarPrescricaoEnfermagem}"
							styleClass="bt_cinza">
							
							<f:setPropertyActionListener
								target="#{selecionarPrescricaoEnfermagemController.prontuario}"
								value="#{listaPacientesEnfermagemController.prontuario}"
								for="command" />
								
							<f:setPropertyActionListener
								target="#{selecionarPrescricaoEnfermagemController.cameFrom}"
								value="listaPacientesEnfermagem" for="command" />			
								
						</mec:commandButton>
						
						
						<mec:commandButton 
						    id="bt_cons_presc_medica_hcpa_aghweb"
							value="#{messages.LABEL_CONS_PRESC_MEDICA}"
							rendered="#{listaPacientesEnfermagemController.moduloPrescMedicaAtivo == false and listaPacientesEnfermagemController.integracaoAGHUAGHWEB == true}"
							disabled="#{empty listaPacientesEnfermagemController.prontuario or not mf:hasPermission(securityController,'consultarPrescricaoMedica,consultar')}"
							onclick="prescricao('#{listaPacientesEnfermagemController.urlBaseWebForms}', '#{listaPacientesEnfermagemController.bancoAghWeb}','#{listaPacientesEnfermagemController.atdSeq}', '#{listaPacientesEnfermagemController.obterTokenUsuarioLogado()}'); return false;"
							styleClass="bt_cinza" />
							
							
						<mec:commandButton id="bt_cons_presc_medica"
							value="#{messages.LABEL_CONS_PRESC_MEDICA}"
							rendered="#{listaPacientesEnfermagemController.moduloPrescMedicaAtivo == true}"
							disabled="#{empty listaPacientesEnfermagemController.prontuario or not mf:hasPermission(securityController,'consultarPrescricaoMedica,consultar')}"			
							action="#{listaPacientesEnfermagemController.consultarPrescricaoMedica}"
							styleClass="bt_cinza">
							
							<f:setPropertyActionListener
								target="#{selecionarPrescricaoConsultarController.prontuario}"
								value="#{listaPacientesEnfermagemController.prontuario}"
								for="command" />
								
							<f:setPropertyActionListener
								target="#{selecionarPrescricaoConsultarController.voltarPara}"
								value="prescricaoenfermagem-listaPacientesEnfermagem" for="command" />
								
						</mec:commandButton>
						
						<mec:commandButton 
						    id="bt_outras_consultas_hcpa_aghweb"
							value="#{messages.LABEL_OUTRAS_CONSULTAS}"
							disabled="#{empty listaPacientesEnfermagemController.prontuario or not listaPacientesEnfermagemController.integracaoAGHUAGHWEB}"
							onclick="consultaPresc('#{listaPacientesEnfermagemController.urlBaseWebForms}', '#{listaPacientesEnfermagemController.bancoAghWeb}','#{listaPacientesEnfermagemController.atdSeq}', '#{listaPacientesEnfermagemController.obterTokenUsuarioLogado()}'); return false;"
							styleClass="bt_cinza" />

	 					<mec:commandButton id="bt_pesquisar_exames"
							value="#{messages.LABEL_PESQUISAR}"
							disabled="#{empty listaPacientesEnfermagemController.prontuario}"
							action="#{listaPacientesEnfermagemController.visualizarResultadoExames(listaPacientesEnfermagemController.pacienteEnfermagemVOSelecionado)}"
							styleClass="bt_cinza" />
						
						<mec:commandButton id="bt_ulceras_quedas"
							value="#{messages.LABEL_ULCERAS_QUEDAS}"
							disabled="#{empty listaPacientesEnfermagemController.prontuario                      or listaPacientesEnfermagemController.integracaoAGHUAGHWEB == false                      or not mf:hasPermission(securityController,'ulcerasQuedas,pesquisar')}"
							onclick="ulcerasquedas('#{listaPacientesEnfermagemController.urlBaseWebForms}', '#{listaPacientesEnfermagemController.bancoAghWeb}','#{listaPacientesEnfermagemController.atdSeq}', '#{listaPacientesEnfermagemController.obterTokenUsuarioLogado()}'); return false;"
							styleClass="bt_cinza" 
							style="display:none"/>
							
						<mec:commandButton id="bt_controle_infeccao"
							value="#{messages.LABEL_CONTROLE_DE_INFECCAO}"
							disabled="#{empty listaPacientesEnfermagemController.prontuario or listaPacientesEnfermagemController.integracaoAGHUAGHWEB == false or not mf:hasPermission(securityController,'controleInfeccaoListaPrescricao,notificar')}"
							onclick="controleinfeccao('#{listaPacientesEnfermagemController.urlBaseWebForms}', '#{listaPacientesEnfermagemController.bancoAghWeb}','#{listaPacientesEnfermagemController.atdSeq}', '#{listaPacientesEnfermagemController.obterTokenUsuarioLogado()}'); return false;"
							styleClass="bt_cinza"
							style="display:none" />
							
						<mec:commandButton id="bt_caderno_pacientes"
							value="#{messages.LABEL_CADERNO_PACIENTES}"
							disabled="#{listaPacientesEnfermagemController.lista == null or listaPacientesEnfermagemController.lista.size() eq 0}"
							onclick="cadernopac('#{listaPacientesEnfermagemController.urlBaseWebForms}', '#{listaPacientesEnfermagemController.bancoAghWeb}', '#{listaPacientesEnfermagemController.obterTokenUsuarioLogado()}', '#{listaPacientesEnfermagemController.getServidor().getId().getMatricula()}', '#{listaPacientesEnfermagemController.getServidor().getId().getVinCodigo()}'); return false;"
							styleClass="bt_cinza" 
							style="display:none"/>
							
						<mec:commandButton id="bt_consultoria"
							value="#{messages.LABEL_CONSULTORIA}"
							disabled="#{empty listaPacientesEnfermagemController.prontuario                      or listaPacientesEnfermagemController.integracaoAGHUAGHWEB == false                      or not mf:hasPermission(securityController,'consultoriaEnfermagem,solicitar')}"
							onclick="consultoriaenf('#{listaPacientesEnfermagemController.urlBaseWebForms}', '#{listaPacientesEnfermagemController.bancoAghWeb}','#{listaPacientesEnfermagemController.atdSeq}', '#{listaPacientesEnfermagemController.obterTokenUsuarioLogado()}', '#{listaPacientesEnfermagemController.getEscolhaConsultoriaEnfermagem()}'); return false;"
							styleClass="bt_cinza" />
						<mec:commandButton id="bt_imprime_pulseira"
							value="#{messages.LABEL_IMPRIMIR_PULSEIRA}"
							disabled="#{empty listaPacientesEnfermagemController.atdSeq}"
							action="#{impressaoPulseiraController.imprimePulseira}"
							styleClass="bt_cinza">
							<f:setPropertyActionListener
								target="#{impressaoPulseiraController.aipPacCodigo}"
								value="#{listaPacientesEnfermagemController.pacCodigo}"
								for="command" />
							<f:setPropertyActionListener
								target="#{impressaoPulseiraController.atdSeq}"
								value="#{listaPacientesEnfermagemController.atdSeq}"
								for="command" />
						</mec:commandButton>
						
						<mec:commandButton id="bt_consultar_diagnostico"
							value="#{messages.LABEL_CONSULTAR_DIAGNOSTICO}"
							rendered="#{mf:hasPermission(securityController,'elaborarPrescricaoEnfermagem,criar')}"
							action="#{consultarHistoricoDiagnosticoController.consultaHistoricoDiagnostico}"
							disabled="#{listaPacientesEnfermagemController.desabilitaBotaoPrescrever or (mf:hasPermission(securityController, 'paciente,somenteLeitura'))}"
							styleClass="bt_cinza">
							<f:setPropertyActionListener
								target="#{consultarHistoricoDiagnosticoController.codigoPaciente}"
								value="#{listaPacientesEnfermagemController.pacCodigo}"
								for="command" />
							<f:setPropertyActionListener
								target="#{consultarHistoricoDiagnosticoController.atendimentoSeq}"
								value="#{listaPacientesEnfermagemController.atdSeq}"
								for="command" />
							<f:setPropertyActionListener
								target="#{consultarHistoricoDiagnosticoController.cameFrom}"
								value="listaPacientesEnfermagem" for="command" />	
						</mec:commandButton>
					</p:outputPanel>
				</aghu:column>
			</aghu:panelGeral>
			<aghu:acao>
				<table>
					<tr>
						<td rowspan="1" colspan="1">
							<mec:commandButton id="atualizarLista" value="#{messages.LABEL_ATUALIZAR_LISTA}" action="#{listaPacientesEnfermagemController.atualizarLista}" styleClass="bt_cinza" onclick="PF('loadDialogWG').show()"/>
						</td>
						<td rowspan="1" colspan="1"><mec:commandButton
								id="configurarLista" value="#{messages.LABEL_CONFIGURAR_LISTA}"
								rendered="#{mf:hasPermission(securityController,'configurarListaPacientesPrescricaoEnfermagem,configurar')}"
								action="#{listaPacientesEnfermagemController.configurarLista}"
								styleClass="bt_cinza" icon="silk-configuracao">

								<f:setPropertyActionListener
									target="#{configurarListaPacientesController.cameFrom}"
									value="listaPacientesEnfermagem" for="command" />
							</mec:commandButton>
						</td>
						<td rowspan="1" colspan="1">
							<mec:commandButton id="imprimirLista" value="#{messages.LABEL_IMPRIMIR_LISTA}" action="#{listaPacientesEnfermagemController.imprimirLista}" styleClass=" icon-print bt_cinza" profile="print" onclick="PF('loadDialogWG').show()"/>
						</td>
						<td rowspan="1" colspan="1">
							<table class="tbLegenda">
								<tr>
									<ui:param name="backgroundGmr"
										value="#{'background-color: '.concat(listaPacientesEnfermagemController.corGmr).concat(' !important')}" />
									<ui:param name="backgroundPrevAlta"
										value="#{'background-color: '.concat(listaPacientesEnfermagemController.corPrevAlta).concat(' !important')}" />
									<td style="#{backgroundPrevAlta};" rowspan="1" colspan="1"><h:outputText
											value="#{messages.LABEL_PRESCRICAO_ENFERMAGEM_LEG_PREVALTA}" />
									</td>
								</tr>
							</table>
						</td>
					</tr>
				</table>
			</aghu:acao>
		</h:form>
		
	</ui:define>
</ui:composition>
</html>
